/*! For license information please see links.bundle.8054fd394d406c020a25.js.LICENSE.txt */
(()=>{var t={676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function i(t,e,i){var r,s=new Promise((function(s,o){n(r=t[e].apply(t,i)).then(s,o)}));return s.request=r,s}function r(t,e,n){var r=i(t,e,n);return r.then((function(t){if(t)return new u(t,r.request)}))}function s(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function o(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})}))}function c(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function l(t){this._index=t}function u(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}s(l,"_index",["name","keyPath","multiEntry","unique"]),o(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(u.prototype[t]=function(){var e=this,i=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,i),n(e._request).then((function(t){if(t)return new u(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,l].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),i=n[n.length-1],r=this._store||this._index,s=r[t].apply(r,n.slice(0,-1));s.onsuccess=function(){i(s.result)}})}))})),[l,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,i=[];return new Promise((function(r){n.iterateCursor(t,(function(t){t?(i.push(t.value),void 0===e||i.length!=e?t.continue():r(i)):r(i)}))}))})})),t.openDb=function(t,e,n){var r=i(indexedDB,"open",[t,e]),s=r.request;return s&&(s.onupgradeneeded=function(t){n&&n(new d(s.result,t.oldVersion,s.transaction))}),r.then((function(t){return new p(t)}))},t.deleteDb=function(t){return i(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";function t(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function e(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function i(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}Object.create,Object.create;class r{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function o(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}class a extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c.prototype.create)}}class c{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(l,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new a(i,o,n)}}const l=/\{\$([^}]+)}/g;function u(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(h(n)&&h(s)){if(!u(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function h(t){return null!==t&&"object"==typeof t}function f(t,e=1e3,n=2){const i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function d(t){return t&&t._delegate?t._delegate:t}var p=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),g="[DEFAULT]",m=function(){function n(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return n.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new r;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise},n.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}},n.prototype.getComponent=function(){return this.component},n.prototype.setComponent=function(n){var i,r;if(n.name!==this.name)throw Error("Mismatching Component "+n.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=n,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(n))try{this.getOrInitializeService({instanceIdentifier:g})}catch(t){}try{for(var s=t(this.instancesDeferred.entries()),o=s.next();!o.done;o=s.next()){var a=e(o.value,2),c=a[0],l=a[1],u=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService({instanceIdentifier:u});l.resolve(h)}catch(t){}}}catch(t){i={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}},n.prototype.clearInstance=function(t){void 0===t&&(t=g),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},n.prototype.delete=function(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var t;return function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(i(i([],e(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),e(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return n.sent(),[2]}}))}))},n.prototype.isComponentSet=function(){return null!=this.component},n.prototype.isInitialized=function(t){return void 0===t&&(t=g),this.instances.has(t)},n.prototype.getOptions=function(t){return void 0===t&&(t=g),this.instancesOptions.get(t)||{}},n.prototype.initialize=function(n){var i,r;void 0===n&&(n={});var s=n.options,o=void 0===s?{}:s,a=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var l=t(this.instancesDeferred.entries()),u=l.next();!u.done;u=l.next()){var h=e(u.value,2),f=h[0],d=h[1];a===this.normalizeInstanceIdentifier(f)&&d.resolve(c)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return c},n.prototype.onInit=function(t,e){var n,i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);var s=this.instances.get(i);return s&&t(s,i),function(){r.delete(t)}},n.prototype.invokeOnInitCallbacks=function(e,n){var i,r,s=this.onInitCallbacks.get(n);if(s)try{for(var o=t(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(e,n)}catch(t){}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},n.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,i=t.options,r=void 0===i?{}:i,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===g?void 0:e),options:r}),this.instances.set(n,s),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null},n.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=g),this.component?this.component.multipleInstances?t:g:t},n.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},n}(),y=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new m(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();const v=[];var w,b;(b=w||(w={}))[b.DEBUG=0]="DEBUG",b[b.VERBOSE=1]="VERBOSE",b[b.INFO=2]="INFO",b[b.WARN=3]="WARN",b[b.ERROR=4]="ERROR",b[b.SILENT=5]="SILENT";const E={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},I=w.INFO,T={[w.DEBUG]:"log",[w.VERBOSE]:"log",[w.INFO]:"info",[w.WARN]:"warn",[w.ERROR]:"error"},S=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=T[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class A{constructor(t){this.name=t,this._logLevel=I,this._logHandler=S,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in w))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?E[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,w.DEBUG,...t),this._logHandler(this,w.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,w.VERBOSE,...t),this._logHandler(this,w.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,w.INFO,...t),this._logHandler(this,w.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,w.WARN,...t),this._logHandler(this,w.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,w.ERROR,...t),this._logHandler(this,w.ERROR,...t)}}class N{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const D="@firebase/app",k="0.7.4",C=new A("@firebase/app"),_={[D]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},R=new Map,x=new Map;function L(t,e){try{t.container.addComponent(e)}catch(n){C.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function O(t){const e=t.name;if(x.has(e))return C.debug(`There were multiple attempts to register component ${e}.`),!1;x.set(e,t);for(const e of R.values())L(e,t);return!0}function P(t,e){return t.container.getProvider(e)}const M=new c("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class F{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new p("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw M.create("app-deleted",{appName:this._name})}}function V(t="[DEFAULT]"){const e=R.get(t);if(!e)throw M.create("no-app",{appName:t});return e}function U(t,e,n){var i;let r=null!==(i=_[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void C.warn(t.join(" "))}O(new p(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}O(new p("platform-logger",(t=>new N(t)),"PRIVATE")),U(D,k,""),U(D,k,"esm2017"),U("fire-js",""),U("firebase","9.1.3","app");var j=n(676);const B="@firebase/installations",H="0.5.2",$="w:0.5.2",q=new c("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function K(t){return t instanceof a&&t.code.includes("request-failed")}function z({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function G(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function W(t,e){const n=(await e.json()).error;return q.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function X({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Q(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Y(t){return new Promise((e=>{setTimeout(e,t)}))}const J=/^[cdef][\w-]{21}$/;function Z(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return J.test(e)?e:""}catch(t){return""}}function tt(t){return`${t.appName}!${t.appId}`}const et=new Map;function nt(t,e){const n=tt(t);it(n,e),function(t,e){const n=(!rt&&"BroadcastChannel"in self&&(rt=new BroadcastChannel("[Firebase] FID Change"),rt.onmessage=t=>{it(t.data.key,t.data.fid)}),rt);n&&n.postMessage({key:t,fid:e}),0===et.size&&rt&&(rt.close(),rt=null)}(n,e)}function it(t,e){const n=et.get(t);if(n)for(const t of n)t(e)}let rt=null;const st="firebase-installations-store";let ot=null;function at(){return ot||(ot=(0,j.openDb)("firebase-installations-database",1,(t=>{switch(t.oldVersion){case 0:t.createObjectStore(st)}}))),ot}async function ct(t,e){const n=tt(t),i=(await at()).transaction(st,"readwrite"),r=i.objectStore(st),s=await r.get(n);return await r.put(e,n),await i.complete,s&&s.fid===e.fid||nt(t,e.fid),e}async function lt(t){const e=tt(t),n=(await at()).transaction(st,"readwrite");await n.objectStore(st).delete(e),await n.complete}async function ut(t,e){const n=tt(t),i=(await at()).transaction(st,"readwrite"),r=i.objectStore(st),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.complete,!o||s&&s.fid===o.fid||nt(t,o.fid),o}async function ht(t){let e;const n=await ut(t,(n=>{const i=function(t){return pt(t||{fid:Z(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(q.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:async function(t,e){try{return ct(t,await async function(t,{fid:e}){const n=z(t),i=X(t),r={fid:e,authVersion:"FIS_v2",appId:t.appId,sdkVersion:$},s={method:"POST",headers:i,body:JSON.stringify(r)},o=await Q((()=>fetch(n,s)));if(o.ok){const t=await o.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:G(t.authToken)}}throw await W("Create Installation",o)}(t,e))}catch(n){throw K(n)&&409===n.customData.serverCode?await lt(t):await ct(t,{fid:e.fid,registrationStatus:0}),n}}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ft(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function ft(t){let e=await dt(t);for(;1===e.registrationStatus;)await Y(100),e=await dt(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await ht(t);return n||e}return e}function dt(t){return ut(t,(t=>{if(!t)throw q.create("installation-not-found");return pt(t)}))}function pt(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function gt({appConfig:t,platformLoggerProvider:e},n){const i=function(t,{fid:e}){return`${z(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=X(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});s&&r.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:$}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await Q((()=>fetch(i,a)));if(c.ok)return G(await c.json());throw await W("Generate Auth Token",c)}async function mt(t,e=!1){let n;const i=await ut(t.appConfig,(i=>{if(!vt(i))throw q.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await yt(t.appConfig);for(;1===n.authToken.requestStatus;)await Y(100),n=await yt(t.appConfig);const i=n.authToken;return 0===i.requestStatus?mt(t,e):i}(t,e),i;{if(!navigator.onLine)throw q.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await gt(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await ct(t.appConfig,i),n}catch(n){if(!K(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ct(t.appConfig,n)}else await lt(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function yt(t){return ut(t,(t=>{if(!vt(t))throw q.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function vt(t){return void 0!==t&&2===t.registrationStatus}function wt(t){return q.create("missing-app-config-values",{valueName:t})}const bt="installations";O(new p(bt,(t=>{const e=t.getProvider("app").getImmediate();return{app:e,appConfig:function(t){if(!t||!t.options)throw wt("App Configuration");if(!t.name)throw wt("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wt(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:P(e,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),O(new p("installations-internal",(t=>{const e=P(t.getProvider("app").getImmediate(),bt).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await ht(e.appConfig);return i?i.catch(console.error):mt(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await ht(t);e&&await e}(n.appConfig),(await mt(n,e)).token}(e,t)}}),"PRIVATE")),U(B,H),U(B,H,"esm2017");const Et="analytics",It="https://www.googletagmanager.com/gtag/js",Tt=new A("@firebase/analytics");function St(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const At=new c("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Nt=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Dt(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function kt(t,e=Nt,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw At.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw At.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new _t;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Ct({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Ct(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Nt){const{appId:s,measurementId:o}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(At.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(o)return Tt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${t.message}]`),{appId:s,measurementId:o};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Dt(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw At.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(s),e}catch(e){if(!function(t){if(!(t instanceof a&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e)){if(r.deleteThrottleMetadata(s),o)return Tt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e.message}]`),{appId:s,measurementId:o};throw e}const c=503===Number(e.customData.httpStatus)?f(n,r.intervalMillis,30):f(n,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return r.setThrottleMetadata(s,l),Tt.debug(`Calling attemptFetch again in ${c} millis`),Ct(t,l,i,r)}}class _t{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}async function Rt(t,e,n,i,r,s,o){var a;const c=kt(t);c.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Tt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Tt.error(t))),e.push(c);const l=async function(){if("object"!=typeof indexedDB)return Tt.warn(At.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}catch(t){return Tt.warn(At.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[u,h]=await Promise.all([c,l]);(function(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(It))return e;return null})()||function(t,e){const n=document.createElement("script");n.src=`${It}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(s,u.measurementId),r("js",new Date);const f=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return f.origin="firebase",f.update=!0,null!=h&&(f.firebase_id=h),r("config",u.measurementId,f),u.measurementId}class xt{constructor(t){this.app=t}_delete(){return delete Lt[this.app.options.appId],Promise.resolve()}}let Lt={},Ot=[];const Pt={};let Mt,Ft,Vt="dataLayer",Ut=!1;function jt(t,e,n){!function(){const t=[];if(o()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=At.create("invalid-analytics-context",{errorInfo:e});Tt.warn(n.message)}}();const i=t.options.appId;if(!i)throw At.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw At.create("no-api-key");Tt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Lt[i])throw At.create("already-exists",{id:i});if(!Ut){!function(t){let e=[];Array.isArray(window.dataLayer)?e=window.dataLayer:window.dataLayer=e}();const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(t,e,n,i){return async function(r,s,o){try{"event"===r?await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await St(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(t){Tt.error(t)}}(t,e,n,s,o):"config"===r?await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await St(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){Tt.error(t)}t("config",r,s)}(t,e,n,i,s,o):t("set",s)}catch(t){Tt.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window.gtag}}(Lt,Ot,Pt);Ft=t,Mt=e,Ut=!0}return Lt[i]=Rt(t,Ot,Pt,e,Mt,Vt,n),new xt(t)}const Bt="@firebase/analytics",Ht="0.7.2";O(new p(Et,((t,{options:e})=>jt(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),O(new p("analytics-internal",(function(t){try{const e=t.getProvider(Et).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=d(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Ft,Lt[t.app.options.appId],e,n,i).catch((t=>Tt.error(t)))}(e,t,n,i)}}catch(t){throw At.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),U(Bt,Ht),U(Bt,Ht,"esm2017");var $t,qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Kt={},zt=zt||{},Gt=qt||self;function Wt(){}function Xt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Qt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Yt="closure_uid_"+(1e9*Math.random()>>>0),Jt=0;function Zt(t,e,n){return t.call.apply(t.bind,arguments)}function te(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ee(t,e,n){return(ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zt:te).apply(null,arguments)}function ne(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ie(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function re(){this.s=this.s,this.o=this.o}var se={};re.prototype.s=!1,re.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Yt)&&t[Yt]||(t[Yt]=++Jt)}(this);delete se[t]}},re.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ae=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,r="string"==typeof t?t.split(""):t;for(let s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function ce(t){return Array.prototype.concat.apply([],arguments)}function le(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function ue(t){return/^[\s\xa0]*$/.test(t)}var he,fe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function de(t,e){return-1!=t.indexOf(e)}function pe(t,e){return t<e?-1:t>e?1:0}t:{var ge=Gt.navigator;if(ge){var me=ge.userAgent;if(me){he=me;break t}}he=""}function ye(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function ve(t){const e={};for(const n in t)e[n]=t[n];return e}var we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<we.length;e++)n=we[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ee(t){return Ee[" "](t),t}Ee[" "]=Wt;var Ie,Te,Se=de(he,"Opera"),Ae=de(he,"Trident")||de(he,"MSIE"),Ne=de(he,"Edge"),De=Ne||Ae,ke=de(he,"Gecko")&&!(de(he.toLowerCase(),"webkit")&&!de(he,"Edge"))&&!(de(he,"Trident")||de(he,"MSIE"))&&!de(he,"Edge"),Ce=de(he.toLowerCase(),"webkit")&&!de(he,"Edge");function _e(){var t=Gt.document;return t?t.documentMode:void 0}t:{var Re="",xe=(Te=he,ke?/rv:([^\);]+)(\)|;)/.exec(Te):Ne?/Edge\/([\d\.]+)/.exec(Te):Ae?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Te):Ce?/WebKit\/(\S+)/.exec(Te):Se?/(?:Version)[ \/]?(\S+)/.exec(Te):void 0);if(xe&&(Re=xe?xe[1]:""),Ae){var Le=_e();if(null!=Le&&Le>parseFloat(Re)){Ie=String(Le);break t}}Ie=Re}var Oe,Pe={};function Me(){return t=Pe,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=fe(String(Ie)).split("."),n=fe("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=pe(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||pe(0==r[2].length,0==s[2].length)||pe(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}();var t}Gt.document&&Ae?Oe=_e()||parseInt(Ie,10)||void 0:Oe=void 0;var Fe=Oe,Ve=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gt.addEventListener("test",Wt,e),Gt.removeEventListener("test",Wt,e)}catch(t){}return t}();function Ue(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function je(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ke){t:{try{Ee(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Be[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&je.Z.h.call(this)}}Ue.prototype.h=function(){this.defaultPrevented=!0},ie(je,Ue);var Be={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),$e=0;function qe(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++$e,this.ca=this.fa=!1}function Ke(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ze(t){this.src=t,this.g={},this.h=0}function Ge(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=oe(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ke(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function We(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}ze.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=We(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new qe(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var Xe="closure_lm_"+(1e6*Math.random()|0),Qe={};function Ye(t,e,n,i,r){if(i&&i.once)return Ze(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ye(t,e[s],n,i,r);return null}return n=an(n),t&&t[He]?t.N(e,n,Qt(i)?!!i.capture:!!i,r):Je(t,e,n,!1,i,r)}function Je(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Qt(r)?!!r.capture:!!r,a=sn(t);if(a||(t[Xe]=a=new ze(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){var t=rn;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Ve||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(nn(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Ze(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ze(t,e[s],n,i,r);return null}return n=an(n),t&&t[He]?t.O(e,n,Qt(i)?!!i.capture:!!i,r):Je(t,e,n,!0,i,r)}function tn(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)tn(t,e[s],n,i,r);else i=Qt(i)?!!i.capture:!!i,n=an(n),t&&t[He]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=We(s=t.g[e],n,i,r))&&(Ke(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=sn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=We(e,n,i,r)),(n=-1<t?e[t]:null)&&en(n))}function en(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[He])Ge(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(nn(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=sn(e))?(Ge(n,t),0==n.h&&(n.src=null,e[Xe]=null)):Ke(t)}}}function nn(t){return t in Qe?Qe[t]:Qe[t]="on"+t}function rn(t,e){if(t.ca)t=!0;else{e=new je(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&en(t),t=n.call(i,e)}return t}function sn(t){return(t=t[Xe])instanceof ze?t:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function an(t){return"function"==typeof t?t:(t[on]||(t[on]=function(e){return t.handleEvent(e)}),t[on])}function cn(){re.call(this),this.i=new ze(this),this.P=this,this.I=null}function ln(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new Ue(e,t);else if(e instanceof Ue)e.target=e.target||t;else{var r=e;be(e=new Ue(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=un(o,i,!0,e)&&r}if(r=un(o=e.g=t,i,!0,e)&&r,r=un(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=un(o=e.g=n[s],i,!1,e)&&r}function un(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Ge(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}ie(cn,re),cn.prototype[He]=!0,cn.prototype.removeEventListener=function(t,e,n,i){tn(this,t,e,n,i)},cn.prototype.M=function(){if(cn.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Ke(n[i]);delete e.g[t],e.h--}}this.I=null},cn.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},cn.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var hn=Gt.JSON.stringify;function fn(){var t=wn;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var dn,pn=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new gn),(t=>t.reset()));class gn{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function mn(t){Gt.setTimeout((()=>{throw t}),0)}function yn(t,e){dn||function(){var t=Gt.Promise.resolve(void 0);dn=function(){t.then(bn)}}(),vn||(dn(),vn=!0),wn.add(t,e)}var vn=!1,wn=new class{constructor(){this.h=this.g=null}add(t,e){const n=pn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function bn(){for(var t;t=fn();){try{t.h.call(t.g)}catch(t){mn(t)}var e=pn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vn=!1}function En(t,e){cn.call(this),this.h=t||1,this.g=e||Gt,this.j=ee(this.kb,this),this.l=Date.now()}function In(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Tn(t,e,n){if("function"==typeof t)n&&(t=ee(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ee(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gt.setTimeout(t,e||0)}function Sn(t){t.g=Tn((()=>{t.g=null,t.i&&(t.i=!1,Sn(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ie(En,cn),($t=En.prototype).da=!1,$t.S=null,$t.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ln(this,"tick"),this.da&&(In(this),this.start()))}},$t.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$t.M=function(){En.Z.M.call(this),In(this),delete this.g};class An extends re{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Sn(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(t){re.call(this),this.h=t,this.g={}}ie(Nn,re);var Dn=[];function kn(t,e,n,i){Array.isArray(n)||(n&&(Dn[0]=n.toString()),n=Dn);for(var r=0;r<n.length;r++){var s=Ye(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Cn(t){ye(t.g,(function(t,e){this.g.hasOwnProperty(e)&&en(t)}),t),t.g={}}function _n(){this.g=!0}function Rn(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return hn(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}Nn.prototype.M=function(){Nn.Z.M.call(this),Cn(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_n.prototype.Aa=function(){this.g=!1},_n.prototype.info=function(){};var xn={},Ln=null;function On(){return Ln=Ln||new cn}function Pn(t){Ue.call(this,xn.Ma,t)}function Mn(t){const e=On();ln(e,new Pn(e,t))}function Fn(t,e){Ue.call(this,xn.STAT_EVENT,t),this.stat=e}function Vn(t){const e=On();ln(e,new Fn(e,t))}function Un(t,e){Ue.call(this,xn.Na,t),this.size=e}function jn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Gt.setTimeout((function(){t()}),e)}xn.Ma="serverreachability",ie(Pn,Ue),xn.STAT_EVENT="statevent",ie(Fn,Ue),xn.Na="timingevent",ie(Un,Ue);var Bn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $n(){}function qn(t){return t.h||(t.h=t.i())}function Kn(){}$n.prototype.h=null;var zn,Gn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wn(){Ue.call(this,"d")}function Xn(){Ue.call(this,"c")}function Qn(){}function Yn(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new Nn(this),this.P=Zn,t=De?125:void 0,this.W=new En(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}ie(Wn,Ue),ie(Xn,Ue),ie(Qn,$n),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},zn=new Qn;var Zn=45e3,ti={},ei={};function ni(t,e,n){t.K=1,t.v=Ai(wi(e)),t.s=n,t.U=!0,ii(t,null)}function ii(t,e){t.F=Date.now(),ai(t),t.A=wi(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),Vi(n.h,"t",i),t.C=0,n=t.l.H,t.h=new Jn,t.g=Vr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new An(ee(t.Ia,t,t.g),t.O)),kn(t.V,t.g,"readystatechange",t.gb),e=t.H?ve(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Mn(1),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function ri(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function si(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=oi(t,n),i==ei){4==e&&(t.o=4,Vn(14),r=!1),Rn(t.j,t.m,null,"[Incomplete Response]");break}if(i==ti){t.o=4,Vn(15),Rn(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Rn(t.j,t.m,i,null),fi(t,i)}ri(t)&&i!=ei&&i!=ti&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Vn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_r(e),e.L=!0,Vn(11))):(Rn(t.j,t.m,n,"[Invalid Chunked Response]"),hi(t),ui(t))}function oi(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?ei:(n=Number(e.substring(n,i)),isNaN(n)?ti:(i+=1)+n>e.length?ei:(e=e.substr(i,n),t.C=i+n,e))}function ai(t){t.Y=Date.now()+t.P,ci(t,t.P)}function ci(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=jn(ee(t.eb,t),e)}function li(t){t.B&&(Gt.clearTimeout(t.B),t.B=null)}function ui(t){0==t.l.G||t.I||Lr(t.l,t)}function hi(t){li(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,In(t.W),Cn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function fi(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||qi(n.i,t)))if(n.I=t.N,!t.J&&qi(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;xr(n),Er(n)}Cr(n),Vn(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=jn(ee(n.ab,n),6e3));if(1>=$i(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Pr(n,11)}else if((t.J||n.g==t)&&xr(n),!ue(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const e=l[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const r=l[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;!s.g&&(de(t,"spdy")||de(t,"quic")||de(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Ki(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.sa=t,Si(i.F,i.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((i=n).oa=Fr(i,i.H?i.la:null,i.W),o.J){zi(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(li(a),ai(a)),i.g=o}else kr(i);0<n.l.length&&Sr(n)}else"stop"!=l[0]&&"close"!=l[0]||Pr(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Pr(n,7):br(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}Mn(4)}catch(t){}}function di(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xt(t)||"string"==typeof t)ae(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Xt(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;r=(i=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Xt(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t)).length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function pi(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof pi)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function gi(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];mi(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)mi(r,i=t.g[e])||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}function mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}($t=Yn.prototype).setTimeout=function(t){this.P=t},$t.gb=function(t){t=t.target;const e=this.L;e&&3==gr(t)?e.l():this.Ia(t)},$t.Ia=function(t){try{if(t==this.g)t:{const u=gr(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||De||this.g&&(this.h.h||this.g.ga()||mr(this.g)))){this.I||4!=u||7==e||Mn(8==e||0>=h?3:2),li(this);var n=this.g.ba();this.N=n;e:if(ri(this)){var i=mr(this.g);t="";var r=i.length,s=4==gr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hi(this),ui(this);var o="";break e}this.h.i=new Gt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ue(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,Vn(12),hi(this),ui(this);break t}Rn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fi(this,n)}this.U?(si(this,u,o),De&&this.i&&3==u&&(kn(this.V,this.W,"tick",this.fb),this.W.start())):(Rn(this.j,this.m,o,null),fi(this,o)),4==u&&hi(this),this.i&&!this.I&&(4==u?Lr(this.l,this):(this.i=!1,ai(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Vn(12)):(this.o=0,Vn(13)),hi(this),ui(this)}}}catch(t){}},$t.fb=function(){if(this.g){var t=gr(this.g),e=this.g.ga();this.C<e.length&&(li(this),si(this,t,e),this.i&&4!=t&&ai(this))}},$t.cancel=function(){this.I=!0,hi(this)},$t.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Mn(3),Vn(17)),hi(this),this.o=2,ui(this)):ci(this,this.Y-t)},($t=pi.prototype).R=function(){gi(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},$t.T=function(){return gi(this),this.g.concat()},$t.get=function(t,e){return mi(this.h,t)?this.h[t]:e},$t.set=function(t,e){mi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},$t.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};var yi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vi(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof vi){this.g=void 0!==e?e:t.g,bi(this,t.j),this.s=t.s,Ei(this,t.i),Ii(this,t.m),this.l=t.l,e=t.h;var n=new Oi;n.i=e.i,e.g&&(n.g=new pi(e.g),n.h=e.h),Ti(this,n),this.o=t.o}else t&&(n=String(t).match(yi))?(this.g=!!e,bi(this,n[1]||"",!0),this.s=Ni(n[2]||""),Ei(this,n[3]||"",!0),Ii(this,n[4]),this.l=Ni(n[5]||"",!0),Ti(this,n[6]||"",!0),this.o=Ni(n[7]||"")):(this.g=!!e,this.h=new Oi(null,this.g))}function wi(t){return new vi(t)}function bi(t,e,n){t.j=n?Ni(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ei(t,e,n){t.i=n?Ni(e,!0):e}function Ii(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ti(t,e,n){e instanceof Oi?(t.h=e,function(t,e){e&&!t.j&&(Pi(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Mi(this,e),Vi(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Di(e,xi)),t.h=new Oi(e,t.g))}function Si(t,e,n){t.h.set(e,n)}function Ai(t){return Si(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ni(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Di(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ki),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ki(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Di(e,Ci,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Di(e,Ci,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Di(n,"/"==n.charAt(0)?Ri:_i,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Di(n,Li)),t.join("")};var Ci=/[#\/\?@]/g,_i=/[#\?:]/g,Ri=/[#\?]/g,xi=/[#\?@]/g,Li=/#/g;function Oi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Pi(t){t.g||(t.g=new pi,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Mi(t,e){Pi(t),e=Ui(t,e),mi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,mi((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&gi(t)))}function Fi(t,e){return Pi(t),e=Ui(t,e),mi(t.g.h,e)}function Vi(t,e,n){Mi(t,e),0<n.length&&(t.i=null,t.g.set(Ui(t,e),le(n)),t.h+=n.length)}function Ui(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ji(t){this.l=t||Bi,t=Gt.PerformanceNavigationTiming?0<(t=Gt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ea&&Gt.g.Ea()&&Gt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($t=Oi.prototype).add=function(t,e){Pi(this),this.i=null,t=Ui(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},$t.forEach=function(t,e){Pi(this),this.g.forEach((function(n,i){ae(n,(function(n){t.call(e,n,i,this)}),this)}),this)},$t.T=function(){Pi(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},$t.R=function(t){Pi(this);var e=[];if("string"==typeof t)Fi(this,t)&&(e=ce(e,this.g.get(Ui(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ce(e,t[n])}return e},$t.set=function(t,e){return Pi(this),this.i=null,Fi(this,t=Ui(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},$t.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},$t.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};var Bi=10;function Hi(t){return!!t.h||!!t.g&&t.g.size>=t.j}function $i(t){return t.h?1:t.g?t.g.size:0}function qi(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ki(t,e){t.g?t.g.add(e):t.h=e}function zi(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Gi(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return le(t.i)}function Wi(){}function Xi(){this.g=new Wi}function Qi(t,e,n){const i=n||"";try{di(t,(function(t,n){let r=t;Qt(t)&&(r=hn(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Yi(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Ji(t){this.l=t.$b||null,this.j=t.ib||!1}function Zi(t,e){cn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=tr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ji.prototype.cancel=function(){if(this.i=Gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Wi.prototype.stringify=function(t){return Gt.JSON.stringify(t,void 0)},Wi.prototype.parse=function(t){return Gt.JSON.parse(t,void 0)},ie(Ji,$n),Ji.prototype.g=function(){return new Zi(this.l,this.j)},Ji.prototype.i=function(t){return function(){return t}}({}),ie(Zi,cn);var tr=0;function er(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function nr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ir(t)}function ir(t){t.onreadystatechange&&t.onreadystatechange.call(t)}($t=Zi.prototype).open=function(t,e){if(this.readyState!=tr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ir(this)},$t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},$t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nr(this)),this.readyState=tr},$t.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;er(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},$t.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?nr(this):ir(this),3==this.readyState&&er(this)}},$t.Ua=function(t){this.g&&(this.response=this.responseText=t,nr(this))},$t.Ta=function(t){this.g&&(this.response=t,nr(this))},$t.ha=function(){this.g&&nr(this)},$t.setRequestHeader=function(t,e){this.v.append(t,e)},$t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},$t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var rr=Gt.JSON.parse;function sr(t){cn.call(this),this.headers=new pi,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=or,this.K=this.L=!1}ie(sr,cn);var or="",ar=/^https?$/i,cr=["POST","PUT"];function lr(t){return"content-type"==t.toLowerCase()}function ur(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,hr(t),dr(t)}function hr(t){t.D||(t.D=!0,ln(t,"complete"),ln(t,"error"))}function fr(t){if(t.h&&void 0!==zt&&(!t.C[1]||4!=gr(t)||2!=t.ba()))if(t.v&&4==gr(t))Tn(t.Fa,0,t);else if(ln(t,"readystatechange"),4==gr(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.H).match(yi)[1]||null;if(!r&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;r=s.substr(0,s.length-1)}i=!ar.test(r?r.toLowerCase():"")}n=i}if(n)ln(t,"complete"),ln(t,"success");else{t.m=6;try{var o=2<gr(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",hr(t)}}finally{dr(t)}}}function dr(t,e){if(t.g){pr(t);const n=t.g,i=t.C[0]?Wt:null;t.g=null,t.C=null,e||ln(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function pr(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Gt.clearTimeout(t.A),t.A=null)}function gr(t){return t.g?t.g.readyState:0}function mr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case or:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function yr(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){let e="";return ye(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Si(t,e,n))}function vr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wr(t){this.za=0,this.l=[],this.h=new _n,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vr("baseRetryDelayMs",5e3,t),this.$a=vr("retryDelaySeedMs",1e4,t),this.Ya=vr("forwardChannelMaxRetries",2,t),this.ra=vr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ji(t&&t.concurrentRequestLimit),this.Ca=new Xi,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function br(t){if(Ir(t),3==t.G){var e=t.V++,n=wi(t.F);Si(n,"SID",t.J),Si(n,"RID",e),Si(n,"TYPE","terminate"),Nr(t,n),(e=new Yn(t,t.h,e,void 0)).K=2,e.v=Ai(wi(n)),n=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(n=Gt.navigator.sendBeacon(e.v.toString(),"")),!n&&Gt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Vr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ai(e)}Mr(t)}function Er(t){t.g&&(_r(t),t.g.cancel(),t.g=null)}function Ir(t){Er(t),t.u&&(Gt.clearTimeout(t.u),t.u=null),xr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Gt.clearTimeout(t.m),t.m=null)}function Tr(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Sr(t)}function Sr(t){Hi(t.i)||t.m||(t.m=!0,yn(t.Ha,t),t.C=0)}function Ar(t,e){var n;n=e?e.m:t.V++;const i=wi(t.F);Si(i,"SID",t.J),Si(i,"RID",n),Si(i,"AID",t.U),Nr(t,i),t.o&&t.s&&yr(i,t.o,t.s),n=new Yn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Dr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ki(t.i,n),ni(n,i,e)}function Nr(t,e){t.j&&di({},(function(t,n){Si(e,n,t)}))}function Dr(t,e,n){n=Math.min(t.l.length,n);var i=t.j?ee(t.j.Oa,t.j,t):null;t:{var r=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{Qi(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,i}function kr(t){t.g||t.u||(t.Y=1,yn(t.Ga,t),t.A=0)}function Cr(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=jn(ee(t.Ga,t),Or(t,t.A)),t.A++,0))}function _r(t){null!=t.B&&(Gt.clearTimeout(t.B),t.B=null)}function Rr(t){t.g=new Yn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=wi(t.oa);Si(e,"RID","rpc"),Si(e,"SID",t.J),Si(e,"CI",t.N?"0":"1"),Si(e,"AID",t.U),Nr(t,e),Si(e,"TYPE","xmlhttp"),t.o&&t.s&&yr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ai(wi(e)),n.s=null,n.U=!0,ii(n,t)}function xr(t){null!=t.v&&(Gt.clearTimeout(t.v),t.v=null)}function Lr(t,e){var n=null;if(t.g==e){xr(t),_r(t),t.g=null;var i=2}else{if(!qi(t.i,e))return;n=e.D,zi(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;ln(i=On(),new Un(i,n,e,r)),Sr(t)}else kr(t);else if(3==(r=e.o)||0==r&&0<t.I||!(1==i&&function(t,e){return!($i(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=jn(ee(t.Ha,t,e),Or(t,t.C)),t.C++,0)))}(t,e)||2==i&&Cr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Pr(t,5);break;case 4:Pr(t,10);break;case 3:Pr(t,6);break;default:Pr(t,2)}}function Or(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Pr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=ee(t.jb,t);n||(n=new vi("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||bi(n,"https"),Ai(n)),function(t,e){const n=new _n;if(Gt.Image){const i=new Image;i.onload=ne(Yi,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ne(Yi,n,i,"TestLoadImage: error",!1,e),i.onabort=ne(Yi,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ne(Yi,n,i,"TestLoadImage: timeout",!1,e),Gt.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Vn(2);t.G=0,t.j&&t.j.va(e),Mr(t),Ir(t)}function Mr(t){t.G=0,t.I=-1,t.j&&(0==Gi(t.i).length&&0==t.l.length||(t.i.i.length=0,le(t.l),t.l.length=0),t.j.ua())}function Fr(t,e,n){let i=function(t){return t instanceof vi?wi(t):new vi(t,void 0)}(n);if(""!=i.i)e&&Ei(i,e+"."+i.i),Ii(i,i.m);else{const t=Gt.location;i=function(t,e,n,i){var r=new vi(null,void 0);return t&&bi(r,t),e&&Ei(r,e),n&&Ii(r,n),i&&(r.l=i),r}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&ye(t.aa,(function(t,e){Si(i,e,t)})),e=t.D,n=t.sa,e&&n&&Si(i,e,n),Si(i,"VER",t.ma),Nr(t,i),i}function Vr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new sr(new Ji({ib:!0})):new sr(t.qa)).L=t.H,e}function Ur(){}function jr(){if(Ae&&!(10<=Number(Fe)))throw Error("Environmental error: no available transport.")}function Br(t,e){cn.call(this),this.g=new wr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ue(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ue(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new qr(this)}function Hr(t){Wn.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function $r(){Xn.call(this),this.status=1}function qr(t){this.g=t}($t=sr.prototype).ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zn.g(),this.C=this.u?qn(this.u):qn(zn),this.g.onreadystatechange=ee(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void ur(this,t)}t=n||"";const r=new pi(this.headers);i&&di(i,(function(t,e){r.set(e,t)})),i=function(t){t:{var e=lr;const n=t.length,i="string"==typeof t?t.split(""):t;for(let r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.T()),n=Gt.FormData&&t instanceof Gt.FormData,!(0<=oe(cr,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pr(this),0<this.B&&((this.K=function(t){return Ae&&Me()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ee(this.pa,this)):this.A=Tn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ur(this,t)}},$t.pa=function(){void 0!==zt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ln(this,"timeout"),this.abort(8))},$t.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ln(this,"complete"),ln(this,"abort"),dr(this))},$t.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dr(this,!0)),sr.Z.M.call(this)},$t.Fa=function(){this.s||(this.F||this.v||this.l?fr(this):this.cb())},$t.cb=function(){fr(this)},$t.ba=function(){try{return 2<gr(this)?this.g.status:-1}catch(t){return-1}},$t.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},$t.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),rr(e)}},$t.Da=function(){return this.m},$t.La=function(){return"string"==typeof this.j?this.j:String(this.j)},($t=wr.prototype).ma=8,$t.G=1,$t.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},$t.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new Yn(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=ve(s),be(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Dr(this,r,e),Si(n=wi(this.F),"RID",t),Si(n,"CVER",22),this.D&&Si(n,"X-HTTP-Session-Id",this.D),Nr(this,n),this.o&&s&&yr(n,this.o,s),Ki(this.i,r),this.Ra&&Si(n,"TYPE","init"),this.ja?(Si(n,"$req",e),Si(n,"SID","null"),r.$=!0,ni(r,n,null)):ni(r,n,e),this.G=2}}else 3==this.G&&(t?Ar(this,t):0==this.l.length||Hi(this.i)||Ar(this))},$t.Ga=function(){if(this.u=null,Rr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=jn(ee(this.bb,this),t)}},$t.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vn(10),Er(this),Rr(this))},$t.ab=function(){null!=this.v&&(this.v=null,Er(this),Cr(this),Vn(19))},$t.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Vn(2)):(this.h.info("Failed to ping google.com"),Vn(1))},($t=Ur.prototype).xa=function(){},$t.wa=function(){},$t.va=function(){},$t.ua=function(){},$t.Oa=function(){},jr.prototype.g=function(t,e){return new Br(t,e)},ie(Br,cn),Br.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),yn(ee(t.hb,t,e))),Vn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Fr(t,null,t.W),Sr(t)},Br.prototype.close=function(){br(this.g)},Br.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Tr(this.g,e)}else this.v?((e={}).__data__=hn(t),Tr(this.g,e)):Tr(this.g,t)},Br.prototype.M=function(){this.g.j=null,delete this.j,br(this.g),delete this.g,Br.Z.M.call(this)},ie(Hr,Wn),ie($r,Xn),ie(qr,Ur),qr.prototype.xa=function(){ln(this.g,"a")},qr.prototype.wa=function(t){ln(this.g,new Hr(t))},qr.prototype.va=function(t){ln(this.g,new $r(t))},qr.prototype.ua=function(){ln(this.g,"b")},jr.prototype.createWebChannel=jr.prototype.g,Br.prototype.send=Br.prototype.u,Br.prototype.open=Br.prototype.m,Br.prototype.close=Br.prototype.close,Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,Hn.COMPLETE="complete",Kn.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",cn.prototype.listen=cn.prototype.N,sr.prototype.listenOnce=sr.prototype.O,sr.prototype.getLastError=sr.prototype.La,sr.prototype.getLastErrorCode=sr.prototype.Da,sr.prototype.getStatus=sr.prototype.ba,sr.prototype.getResponseJson=sr.prototype.Qa,sr.prototype.getResponseText=sr.prototype.ga,sr.prototype.send=sr.prototype.ea;var Kr=Kt.createWebChannelTransport=function(){return new jr},zr=Kt.getStatEventTarget=function(){return On()},Gr=Kt.ErrorCode=Bn,Wr=Kt.EventType=Hn,Xr=Kt.Event=xn,Qr=Kt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yr=Kt.FetchXmlHttpFactory=Ji,Jr=Kt.WebChannel=Kn,Zr=Kt.XhrIo=sr;const ts="@firebase/firestore";class es{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let ns="9.1.3";const is=new A("@firebase/firestore");function rs(){return is.logLevel}function ss(t,...e){if(is.logLevel<=w.DEBUG){const n=e.map(cs);is.debug(`Firestore (${ns}): ${t}`,...n)}}function os(t,...e){if(is.logLevel<=w.ERROR){const n=e.map(cs);is.error(`Firestore (${ns}): ${t}`,...n)}}function as(t,...e){if(is.logLevel<=w.WARN){const n=e.map(cs);is.warn(`Firestore (${ns}): ${t}`,...n)}}function cs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function ls(t="Unexpected state"){const e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+t;throw os(e),new Error(e)}function us(t,e){t||ls()}function hs(t,e){return t}const fs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ds extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ps{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class gs{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class ms{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(es.UNAUTHENTICATED)))}shutdown(){}}class ys{constructor(t){this.t=t,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ps,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{ss("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ss("FirebaseCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ps)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ss("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(us("string"==typeof e.accessToken),new gs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return us(null===t||"string"==typeof t),new es(t)}}class vs{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=es.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class ws{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new vs(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function Es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}bs.T=-1;class Is{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=Es(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function Ts(t,e){return t<e?-1:t>e?1:0}function Ss(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class As{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ds(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ds(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ds(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ds(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return As.fromMillis(Date.now())}static fromDate(t){return As.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new As(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ts(this.nanoseconds,t.nanoseconds):Ts(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ns{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ns(t)}static min(){return new Ns(new As(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ds(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cs(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class _s{constructor(t,e,n){void 0===e?e=0:e>t.length&&ls(),void 0===n?n=t.length-e:n>t.length-e&&ls(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===_s.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _s?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Rs extends _s{construct(t,e,n){return new Rs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ds(fs.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Rs(e)}static emptyPath(){return new Rs([])}}const xs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ls extends _s{construct(t,e,n){return new Ls(t,e,n)}static isValidIdentifier(t){return xs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ls.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ls(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ds(fs.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ds(fs.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ds(fs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new ds(fs.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ls(e)}static emptyPath(){return new Ls([])}}class Os{constructor(t){this.fields=t,t.sort(Ls.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ss(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Ps{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Ps(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Ps(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ts(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ps.EMPTY_BYTE_STRING=new Ps("");const Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(us(!!t),"string"==typeof t){let e=0;const n=Ms.exec(t);if(us(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vs(t.seconds),nanos:Vs(t.nanos)}}function Vs(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Us(t){return"string"==typeof t?Ps.fromBase64String(t):Ps.fromUint8Array(t)}function js(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new As(e.seconds,e.nanos)}function Bs(t){return null==t}function Hs(t){return 0===t&&1/t==-1/0}class $s{constructor(t){this.path=t}static fromPath(t){return new $s(Rs.fromString(t))}static fromName(t){return new $s(Rs.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Rs.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Rs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $s(new Rs(t.slice()))}}function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?function(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(t)?4:10:ls()}function Ks(t,e){const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return js(t).isEqual(js(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Fs(t.timestampValue),i=Fs(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Us(t.bytesValue).isEqual(Us(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Vs(t.geoPointValue.latitude)===Vs(e.geoPointValue.latitude)&&Vs(t.geoPointValue.longitude)===Vs(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Vs(t.integerValue)===Vs(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Vs(t.doubleValue),i=Vs(e.doubleValue);return n===i?Hs(n)===Hs(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Ss(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ds(n)!==Ds(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Ks(n[t],i[t])))return!1;return!0}(t,e);default:return ls()}}function zs(t,e){return void 0!==(t.values||[]).find((t=>Ks(t,e)))}function Gs(t,e){const n=qs(t),i=qs(e);if(n!==i)return Ts(n,i);switch(n){case 0:return 0;case 1:return Ts(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Vs(t.integerValue||t.doubleValue),i=Vs(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Ws(t.timestampValue,e.timestampValue);case 4:return Ws(js(t),js(e));case 5:return Ts(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Us(t),i=Us(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=Ts(n[t],i[t]);if(0!==e)return e}return Ts(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ts(Vs(t.latitude),Vs(e.latitude));return 0!==n?n:Ts(Vs(t.longitude),Vs(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Gs(n[t],i[t]);if(e)return e}return Ts(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=Ts(i[t],s[t]);if(0!==e)return e;const o=Gs(n[i[t]],r[s[t]]);if(0!==o)return o}return Ts(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ls()}}function Ws(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ts(t,e);const n=Fs(t),i=Fs(e),r=Ts(n.seconds,i.seconds);return 0!==r?r:Ts(n.nanos,i.nanos)}function Xs(t){return Qs(t)}function Qs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Fs(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Us(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,$s.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Qs(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Qs(t.fields[r])}`;return n+"}"}(t.mapValue):ls();var e,n}function Ys(t){return!!t&&"integerValue"in t}function Js(t){return!!t&&"arrayValue"in t}function Zs(t){return!!t&&"mapValue"in t}function to(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=to(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=to(t.arrayValue.values[n]);return e}return Object.assign({},t)}class eo{constructor(t){this.value=t}static empty(){return new eo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Zs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=to(e)}setAll(t){let e=Ls.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=to(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Zs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ks(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Zs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){ks(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new eo(to(this.value))}}function no(t){const e=[];return ks(t.fields,((t,n)=>{const i=new Ls([t]);if(Zs(n)){const t=no(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Os(e)}class io{constructor(t,e,n,i,r){this.key=t,this.documentType=e,this.version=n,this.data=i,this.documentState=r}static newInvalidDocument(t){return new io(t,0,Ns.min(),eo.empty(),0)}static newFoundDocument(t,e,n){return new io(t,1,e,n,0)}static newNoDocument(t,e){return new io(t,2,e,eo.empty(),0)}static newUnknownDocument(t,e){return new io(t,3,e,eo.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=eo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof io&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new io(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ro{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.A=null}}function so(t,e=null,n=[],i=[],r=null,s=null,o=null){return new ro(t,e,n,i,r,s,o)}function oo(t){const e=hs(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+Xs(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Bs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=wo(e.startAt)),e.endAt&&(t+="|ub:",t+=wo(e.endAt)),e.A=t}return e.A}function ao(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Eo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],i=e.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!Ks(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!To(t.startAt,e.startAt)&&To(t.endAt,e.endAt)}class co extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new lo(t,e,n):"array-contains"===e?new po(t,n):"in"===e?new go(t,n):"not-in"===e?new mo(t,n):"array-contains-any"===e?new yo(t,n):new co(t,e,n)}static R(t,e,n){return"in"===e?new uo(t,n):new ho(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(Gs(e,this.value)):null!==e&&qs(this.value)===qs(e)&&this.P(Gs(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ls()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lo extends co{constructor(t,e,n){super(t,e,n),this.key=$s.fromName(n.referenceValue)}matches(t){const e=$s.comparator(t.key,this.key);return this.P(e)}}class uo extends co{constructor(t,e){super(t,"in",e),this.keys=fo(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class ho extends co{constructor(t,e){super(t,"not-in",e),this.keys=fo(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function fo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>$s.fromName(t.referenceValue)))}class po extends co{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Js(e)&&zs(e.arrayValue,this.value)}}class go extends co{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&zs(this.value.arrayValue,e)}}class mo extends co{constructor(t,e){super(t,"not-in",e)}matches(t){if(zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!zs(this.value.arrayValue,e)}}class yo extends co{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Js(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>zs(this.value.arrayValue,t)))}}class vo{constructor(t,e){this.position=t,this.before=e}}function wo(t){return`${t.before?"b":"a"}:${t.position.map((t=>Xs(t))).join(",")}`}class bo{constructor(t,e="asc"){this.field=t,this.dir=e}}function Eo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Io(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?$s.comparator($s.fromName(o.referenceValue),n.key):Gs(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function To(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}class So{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function Ao(t){const e=hs(t);if(null===e.V){e.V=[];const t=function(t){for(const e of t.filters)if(e.v())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new bo(t)),e.V.push(new bo(Ls.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new bo(Ls.keyField(),t))}}}return e.V}function No(t){const e=hs(t);if(!e.S)if("F"===e.limitType)e.S=so(e.path,e.collectionGroup,Ao(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Ao(e)){const e="desc"===n.dir?"asc":"desc";t.push(new bo(n.field,e))}const n=e.endAt?new vo(e.endAt.position,!e.endAt.before):null,i=e.startAt?new vo(e.startAt.position,!e.startAt.before):null;e.S=so(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.S}function Do(t,e){return ao(No(t),No(e))&&t.limitType===e.limitType}function ko(t){return`${oo(No(t))}|lt:${t.limitType}`}function Co(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${Xs(e.value)}`;var e})).join(", ")}]`),Bs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+wo(t.startAt)),t.endAt&&(e+=", endAt: "+wo(t.endAt)),`Target(${e})`}(No(t))}; limitType=${t.limitType})`}function _o(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):$s.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Io(t.startAt,Ao(t),e)||t.endAt&&Io(t.endAt,Ao(t),e))}(t,e)}function Ro(t,e,n){const i=t.field.isKeyField()?$s.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Gs(i,r):ls()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ls()}}function xo(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(e)?"-0":e}}function Lo(t){return{integerValue:""+t}}function Oo(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Hs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Lo(e):xo(t,e)}class Po{constructor(){this._=void 0}}function Mo(t,e,n){return t instanceof Uo?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof jo?Bo(t,e):t instanceof Ho?$o(t,e):function(t,e){const n=Vo(t,e),i=Ko(n)+Ko(t.C);return Ys(n)&&Ys(t.C)?Lo(i):xo(t.N,i)}(t,e)}function Fo(t,e,n){return t instanceof jo?Bo(t,e):t instanceof Ho?$o(t,e):n}function Vo(t,e){return t instanceof qo?Ys(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Uo extends Po{}class jo extends Po{constructor(t){super(),this.elements=t}}function Bo(t,e){const n=zo(e);for(const e of t.elements)n.some((t=>Ks(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Ho extends Po{constructor(t){super(),this.elements=t}}function $o(t,e){let n=zo(e);for(const e of t.elements)n=n.filter((t=>!Ks(t,e)));return{arrayValue:{values:n}}}class qo extends Po{constructor(t,e){super(),this.N=t,this.C=e}}function Ko(t){return Vs(t.integerValue||t.doubleValue)}function zo(t){return Js(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Go{constructor(t,e){this.version=t,this.transformResults=e}}class Wo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Wo}static exists(t){return new Wo(void 0,t)}static updateTime(t){return new Wo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Qo{}function Yo(t,e,n){t instanceof na?function(t,e,n){const i=t.value.clone(),r=sa(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ia?function(t,e,n){if(!Xo(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=sa(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(ra(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n){t instanceof na?function(t,e,n){if(!Xo(t.precondition,e))return;const i=t.value.clone(),r=oa(t.fieldTransforms,n,e);i.setAll(r),e.convertToFoundDocument(ea(e),i).setHasLocalMutations()}(t,e,n):t instanceof ia?function(t,e,n){if(!Xo(t.precondition,e))return;const i=oa(t.fieldTransforms,n,e),r=e.data;r.setAll(ra(t)),r.setAll(i),e.convertToFoundDocument(ea(e),r).setHasLocalMutations()}(t,e,n):function(t,e){Xo(t.precondition,e)&&e.convertToNoDocument(Ns.min())}(t,e)}function Zo(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Vo(i.transform,t||null);null!=r&&(null==n&&(n=eo.empty()),n.set(i.field,r))}return n||null}function ta(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ss(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof jo&&e instanceof jo||t instanceof Ho&&e instanceof Ho?Ss(t.elements,e.elements,Ks):t instanceof qo&&e instanceof qo?Ks(t.C,e.C):t instanceof Uo&&e instanceof Uo}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ea(t){return t.isFoundDocument()?t.version:Ns.min()}class na extends Qo{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}}class ia extends Qo{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}}function ra(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function sa(t,e,n){const i=new Map;us(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Fo(o,a,n[r]))}return i}function oa(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Mo(t,s,e))}return i}class aa extends Qo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class ca extends Qo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}var la,ua;(ua=la||(la={}))[ua.OK=0]="OK",ua[ua.CANCELLED=1]="CANCELLED",ua[ua.UNKNOWN=2]="UNKNOWN",ua[ua.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ua[ua.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ua[ua.NOT_FOUND=5]="NOT_FOUND",ua[ua.ALREADY_EXISTS=6]="ALREADY_EXISTS",ua[ua.PERMISSION_DENIED=7]="PERMISSION_DENIED",ua[ua.UNAUTHENTICATED=16]="UNAUTHENTICATED",ua[ua.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ua[ua.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ua[ua.ABORTED=10]="ABORTED",ua[ua.OUT_OF_RANGE=11]="OUT_OF_RANGE",ua[ua.UNIMPLEMENTED=12]="UNIMPLEMENTED",ua[ua.INTERNAL=13]="INTERNAL",ua[ua.UNAVAILABLE=14]="UNAVAILABLE",ua[ua.DATA_LOSS=15]="DATA_LOSS";class ha{constructor(t,e){this.comparator=t,this.root=e||da.EMPTY}insert(t,e){return new ha(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,da.BLACK,null,null))}remove(t){return new ha(this.comparator,this.root.remove(t,this.comparator).copy(null,null,da.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fa(this.root,t,this.comparator,!1)}getReverseIterator(){return new fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fa(this.root,t,this.comparator,!0)}}class fa{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class da{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:da.RED,this.left=null!=i?i:da.EMPTY,this.right=null!=r?r:da.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new da(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return da.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return da.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,da.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ls();if(this.right.isRed())throw ls();const t=this.left.check();if(t!==this.right.check())throw ls();return t+(this.isRed()?0:1)}}da.EMPTY=null,da.RED=!0,da.BLACK=!1,da.EMPTY=new class{constructor(){this.size=0}get key(){throw ls()}get value(){throw ls()}get color(){throw ls()}get left(){throw ls()}get right(){throw ls()}copy(t,e,n,i,r){return this}insert(t,e,n){return new da(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pa{constructor(t){this.comparator=t,this.data=new ha(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ga(this.data.getIterator())}getIteratorFrom(t){return new ga(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof pa))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new pa(this.comparator);return e.data=t,e}}class ga{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ma=new ha($s.comparator);function ya(){return ma}const va=new ha($s.comparator);function wa(){return va}const ba=new ha($s.comparator);const Ea=new pa($s.comparator);function Ia(...t){let e=Ea;for(const n of t)e=e.add(n);return e}const Ta=new pa(Ts);class Sa{constructor(t,e){this.databaseId=t,this.D=e}}function Aa(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Na(t,e){return t.D?e.toBase64():e.toUint8Array()}function Da(t,e){return Aa(t,e.toTimestamp())}function ka(t){return us(!!t),Ns.fromTimestamp(function(t){const e=Fs(t);return new As(e.seconds,e.nanos)}(t))}function Ca(t,e){return function(t){return new Rs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function _a(t,e){return Ca(t.databaseId,e.path)}function Ra(t){const e=function(t){const e=Rs.fromString(t);return us(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?Rs.emptyPath():function(t){return us(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function xa(t,e,n){return{name:_a(t,e),fields:n.value.mapValue.fields}}function La(t){let e=Ra(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){us(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=Oa(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new bo(Ma(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Bs(e)?null:e}(n.limit));let c=null;n.startAt&&(c=Pa(n.startAt));let l=null;return n.endAt&&(l=Pa(n.endAt)),function(t,e,n,i,r,s,o,a){return new So(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Oa(t){return t?void 0!==t.unaryFilter?[Va(t)]:void 0!==t.fieldFilter?[Fa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>Oa(t))).reduce(((t,e)=>t.concat(e))):ls():[]}function Pa(t){const e=!!t.before,n=t.values||[];return new vo(n,e)}function Ma(t){return Ls.fromServerFormat(t.fieldPath)}function Fa(t){return co.create(Ma(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ls()}}(t.fieldFilter.op),t.fieldFilter.value)}function Va(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Ma(t.unaryFilter.field);return co.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ma(t.unaryFilter.field);return co.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ma(t.unaryFilter.field);return co.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ma(t.unaryFilter.field);return co.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ls()}}function Ua(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ja(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ha(e)),e=Ba(t.get(n),e);return Ha(e)}function Ba(t,e){let n=e;const i=t.length;for(let e=0;e<i;e++){const i=t.charAt(e);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Ha(t){return t+""}class $a{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}$a.store="owner",$a.key="owner";class qa{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}qa.store="mutationQueues",qa.keyPath="userId";class Ka{constructor(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}}Ka.store="mutations",Ka.keyPath="batchId",Ka.userMutationsIndex="userMutationsIndex",Ka.userMutationsKeyPath=["userId","batchId"];class za{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ja(e)]}static key(t,e,n){return[t,ja(e),n]}}za.store="documentMutations",za.PLACEHOLDER=new za;class Ga{constructor(t,e,n,i,r,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=s}}Ga.store="remoteDocuments",Ga.readTimeIndex="readTimeIndex",Ga.readTimeIndexPath="readTime",Ga.collectionReadTimeIndex="collectionReadTimeIndex",Ga.collectionReadTimeIndexPath=["parentPath","readTime"];class Wa{constructor(t){this.byteSize=t}}Wa.store="remoteDocumentGlobal",Wa.key="remoteDocumentGlobalKey";class Xa{constructor(t,e,n,i,r,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Xa.store="targets",Xa.keyPath="targetId",Xa.queryTargetsIndexName="queryTargetsIndex",Xa.queryTargetsKeyPath=["canonicalId","targetId"];class Qa{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Qa.store="targetDocuments",Qa.keyPath=["targetId","path"],Qa.documentTargetsIndex="documentTargetsIndex",Qa.documentTargetsKeyPath=["path","targetId"];class Ya{constructor(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}Ya.key="targetGlobalKey",Ya.store="targetGlobal";class Ja{constructor(t,e){this.collectionId=t,this.parent=e}}Ja.store="collectionParents",Ja.keyPath=["collectionId","parent"];class Za{constructor(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i}}Za.store="clientMetadata",Za.keyPath="clientId";class tc{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}tc.store="bundles",tc.keyPath="bundleId";class ec{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}ec.store="namedQueries",ec.keyPath="name",qa.store,Ka.store,za.store,Ga.store,Xa.store,$a.store,Ya.store,Qa.store,Za.store,Wa.store,Ja.store,tc.store,ec.store;class nc{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ls(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nc(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof nc?e:nc.resolve(e)}catch(t){return nc.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):nc.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):nc.reject(e)}static resolve(t){return new nc(((e,n)=>{e(t)}))}static reject(t){return new nc(((e,n)=>{n(t)}))}static waitFor(t){return new nc(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=nc.resolve(!1);for(const n of t)e=e.next((t=>t?nc.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}}function ic(t){return"IndexedDbTransactionError"===t.name}class rc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Yo(i,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&Jo(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&Jo(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(Ns.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ia())}isEqual(t){return this.batchId===t.batchId&&Ss(this.mutations,t.mutations,((t,e)=>ta(t,e)))&&Ss(this.baseMutations,t.baseMutations,((t,e)=>ta(t,e)))}}class sc{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){us(t.mutations.length===n.length);let i=ba;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new sc(t,e,n,i)}}class oc{constructor(t){this.Wt=t}}function ac(t){const e=La({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class cc{constructor(){this.Gt=new lc}addToCollectionParentIndex(t,e){return this.Gt.add(e),nc.resolve()}getCollectionParents(t,e){return nc.resolve(this.Gt.getEntries(e))}}class lc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new pa(Rs.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new pa(Rs.comparator)).toArray()}}class uc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new uc(t,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}uc.DEFAULT_COLLECTION_PERCENTILE=10,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uc.DEFAULT=new uc(41943040,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uc.DISABLED=new uc(-1,0,0);class hc{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new hc(0)}static ie(){return new hc(-1)}}async function fc(t){if(t.code!==fs.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;ss("LocalStore","Unexpectedly lost primary lease")}class dc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1}forEach(t){ks(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return Cs(this.inner)}}class pc{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Rn(t,e,n)))}Rn(t,e,n){return this.He.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}bn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}Pn(t,e){return this.He.getEntries(t,e).next((e=>this.vn(t,e).next((()=>e))))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.bn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return $s.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new $s(e)).next((t=>{let e=wa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Sn(t,e,n){const i=e.collectionGroup;let r=wa();return this.Ht.getCollectionParents(t,i).next((s=>nc.forEach(s,(s=>{const o=function(t,e){return new So(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.Dn(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}Dn(t,e,n){let i,r;return this.He.getDocumentsMatchingQuery(t,e,n).next((n=>(i=n,this.In.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(r=e,this.Cn(t,r,i).next((t=>{i=t;for(const t of r)for(const e of t.mutations){const n=e.key;let r=i.get(n);null==r&&(r=io.newInvalidDocument(n),i=i.insert(n,r)),Jo(e,r,t.localWriteTime),r.isFoundDocument()||(i=i.remove(n))}}))))).next((()=>(i.forEach(((t,n)=>{_o(e,n)||(i=i.remove(t))})),i)))}Cn(t,e,n){let i=Ia();for(const t of e)for(const e of t.mutations)e instanceof ia&&null===n.get(e.key)&&(i=i.add(e.key));let r=n;return this.He.getEntries(t,i).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(r=r.insert(t,e))})),r)))}}class gc{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=i}static kn(t,e){let n=Ia(),i=Ia();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new gc(t,e.fromCache,n,i)}}class mc{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,i){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ns.min())?this.Fn(t,e):this.On.Pn(t,i).next((r=>{const s=this.Mn(e,r);return(function(t){return!Bs(t.limit)&&"F"===t.limitType}(e)||function(t){return!Bs(t.limit)&&"L"===t.limitType}(e))&&this.Ln(e.limitType,s,i,n)?this.Fn(t,e):(rs()<=w.DEBUG&&ss("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Co(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(s.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Mn(t,e){let n=new pa(function(t){return(e,n)=>{let i=!1;for(const r of Ao(t)){const t=Ro(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{_o(t,i)&&(n=n.add(i))})),n}Ln(t,e,n,i){if(n.size!==e.size)return!0;const r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Fn(t,e){return rs()<=w.DEBUG&&ss("QueryEngine","Using full collection scan to execute query:",Co(e)),this.On.getDocumentsMatchingQuery(t,e,Ns.min())}}class yc{constructor(t,e,n,i){this.persistence=t,this.Bn=e,this.N=i,this.Un=new ha(Ts),this.qn=new dc((t=>oo(t)),ao),this.Kn=Ns.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new pc(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Un)))}}async function vc(t,e){const n=hs(t);let i=n.In,r=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.In.getAllMutationBatches(t).next((o=>(s=o,i=n.persistence.getMutationQueue(e),r=new pc(n.jn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)))).next((e=>{const n=[],i=[];let o=Ia();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return r.Pn(t,o).next((t=>({Wn:t,removedBatchIds:n,addedBatchIds:i})))}))}));return n.In=i,n.Qn=r,n.Bn.$n(n.Qn),s}function wc(t,e){const n=hs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e))))}class bc{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return nc.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:ka(n.createTime)}),nc.resolve()}getNamedQuery(t,e){return nc.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:ac(t.bundledQuery),readTime:ka(t.readTime)}}(e)),nc.resolve()}}class Ec{constructor(){this.Zn=new pa(Ic.ts),this.es=new pa(Ic.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new Ic(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.rs(new Ic(t,e))}os(t,e){t.forEach((t=>this.removeReference(t,e)))}cs(t){const e=new $s(new Rs([])),n=new Ic(e,t),i=new Ic(e,t+1),r=[];return this.es.forEachInRange([n,i],(t=>{this.rs(t),r.push(t.key)})),r}us(){this.Zn.forEach((t=>this.rs(t)))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new $s(new Rs([])),n=new Ic(e,t),i=new Ic(e,t+1);let r=Ia();return this.es.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Ic(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ic{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return $s.comparator(t.key,e.key)||Ts(t.ls,e.ls)}static ns(t,e){return Ts(t.ls,e.ls)||$s.comparator(t.key,e.key)}}class Tc{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new pa(Ic.ts)}checkEmpty(t){return nc.resolve(0===this.In.length)}addMutationBatch(t,e,n,i){const r=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new rc(r,e,n,i);this.In.push(s);for(const e of i)this.ds=this.ds.add(new Ic(e.key,r)),this.Ht.addToCollectionParentIndex(t,e.key.path.popLast());return nc.resolve(s)}lookupMutationBatch(t,e){return nc.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this._s(n),r=i<0?0:i;return nc.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return nc.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return nc.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ic(e,0),i=new Ic(e,Number.POSITIVE_INFINITY),r=[];return this.ds.forEachInRange([n,i],(t=>{const e=this.ws(t.ls);r.push(e)})),nc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new pa(Ts);return e.forEach((t=>{const e=new Ic(t,0),i=new Ic(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,i],(t=>{n=n.add(t.ls)}))})),nc.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;$s.isDocumentKey(r)||(r=r.child(""));const s=new Ic(new $s(r),0);let o=new pa(Ts);return this.ds.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.ls)),!0)}),s),nc.resolve(this.gs(o))}gs(t){const e=[];return t.forEach((t=>{const n=this.ws(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){us(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return nc.forEach(e.mutations,(i=>{const r=new Ic(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.ds=n}))}te(t){}containsKey(t,e){const n=new Ic(e,0),i=this.ds.firstAfterOrEqual(n);return nc.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.In.length,nc.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class Sc{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new ha($s.comparator),this.size=0}addEntry(t,e,n){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(e);return this.docs=this.docs.insert(i,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return nc.resolve(n?n.document.clone():io.newInvalidDocument(e))}getEntries(t,e){let n=ya();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():io.newInvalidDocument(t))})),nc.resolve(n)}getDocumentsMatchingQuery(t,e,n){let i=ya();const r=new $s(e.path.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:t,value:{document:r,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||_o(e,r)&&(i=i.insert(r.key,r.clone()))}return nc.resolve(i)}Ts(t,e){return nc.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Ac(this)}getSize(t){return nc.resolve(this.size)}}class Ac extends class{constructor(){this.changes=new dc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Ns.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:io.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?nc.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.document.isValidDocument()?e.push(this.Se.addEntry(t,i.document,this.getReadTime(n))):this.Se.removeEntry(n)})),nc.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class Nc{constructor(t){this.persistence=t,this.Es=new dc((t=>oo(t)),ao),this.lastRemoteSnapshotVersion=Ns.min(),this.highestTargetId=0,this.Is=0,this.As=new Ec,this.targetCount=0,this.Rs=hc.se()}forEachTarget(t,e){return this.Es.forEach(((t,n)=>e(n))),nc.resolve()}getLastRemoteSnapshotVersion(t){return nc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nc.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),nc.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),nc.resolve()}ae(t){this.Es.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new hc(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ae(e),this.targetCount+=1,nc.resolve()}updateTargetData(t,e){return this.ae(e),nc.resolve()}removeTargetData(t,e){return this.Es.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,nc.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Es.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Es.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),nc.waitFor(r).next((()=>i))}getTargetCount(t){return nc.resolve(this.targetCount)}getTargetData(t,e){const n=this.Es.get(e)||null;return nc.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),nc.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),nc.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),nc.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return nc.resolve(n)}containsKey(t,e){return nc.resolve(this.As.containsKey(e))}}class Dc{constructor(t,e){this.bs={},this.Le=new bs(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new Nc(this),this.Ht=new cc,this.He=function(t,e){return new Sc(t,e)}(this.Ht,(t=>this.referenceDelegate.Ps(t))),this.N=new oc(e),this.Je=new bc(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new Tc(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){ss("MemoryPersistence","Starting transaction:",t);const i=new kc(this.Le.next());return this.referenceDelegate.vs(),n(i).next((t=>this.referenceDelegate.Vs(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Ss(t,e){return nc.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class kc extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class Cc{constructor(t){this.persistence=t,this.Ds=new Ec,this.Cs=null}static Ns(t){return new Cc(t)}get xs(){if(this.Cs)return this.Cs;throw ls()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),nc.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),nc.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),nc.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nc.forEach(this.xs,(n=>{const i=$s.fromPath(n);return this.ks(t,i).next((t=>{t||e.removeEntry(i)}))})).next((()=>(this.Cs=null,e.apply(t))))}updateLimboDocument(t,e){return this.ks(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}Ps(t){return 0}ks(t,e){return nc.or([()=>nc.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}class _c{constructor(){this.activeTargetIds=Ta}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Rc{constructor(){this.yi=new _c,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new _c,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class xc{Ti(t){}shutdown(){}}class Lc{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){ss("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){ss("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Oc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Pc{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class Mc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,i){const r=this.Bi(t,e);ss("RestConnection","Sending: ",r,n);const s={};return this.Ui(s,i),this.qi(t,r,s,n).then((t=>(ss("RestConnection","Received: ",t),t)),(e=>{throw as("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}Ki(t,e,n,i){return this.Li(t,e,n,i)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+ns,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){const n=Oc[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,i){return new Promise(((r,s)=>{const o=new Zr;o.listenOnce(Wr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Gr.NO_ERROR:const e=o.getResponseJson();ss("Connection","XHR received:",JSON.stringify(e)),r(e);break;case Gr.TIMEOUT:ss("Connection",'RPC "'+t+'" timed out'),s(new ds(fs.DEADLINE_EXCEEDED,"Request time out"));break;case Gr.HTTP_ERROR:const n=o.getStatus();if(ss("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(fs).indexOf(e)>=0?e:fs.UNKNOWN}(t.status);s(new ds(e,t.message))}else s(new ds(fs.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new ds(fs.UNAVAILABLE,"Connection failed."));break;default:ls()}}finally{ss("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Kr(),r=zr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Yr({})),this.Ui(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(s())||"object"==typeof navigator&&"ReactNative"===navigator.product||s().indexOf("Electron/")>=0||function(){const t=s();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||s().indexOf("MSAppHost/")>=0||o()||(a.httpHeadersOverwriteParam="$httpHeaders");const c=n.join("");ss("Connection","Creating WebChannel: "+c,a);const l=i.createWebChannel(c,a);let u=!1,h=!1;const f=new Pc({vi:t=>{h?ss("Connection","Not sending because WebChannel is closed:",t):(u||(ss("Connection","Opening WebChannel transport."),l.open(),u=!0),ss("Connection","WebChannel sending:",t),l.send(t))},Vi:()=>l.close()}),d=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(l,Jr.EventType.OPEN,(()=>{h||ss("Connection","WebChannel transport opened.")})),d(l,Jr.EventType.CLOSE,(()=>{h||(h=!0,ss("Connection","WebChannel transport closed"),f.$i())})),d(l,Jr.EventType.ERROR,(t=>{h||(h=!0,as("Connection","WebChannel transport errored:",t),f.$i(new ds(fs.UNAVAILABLE,"The operation could not be completed")))})),d(l,Jr.EventType.MESSAGE,(t=>{var e;if(!h){const n=t.data[0];us(!!n);const i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){ss("Connection","WebChannel received error:",r);const t=r.status;let e=function(t){const e=la[t];if(void 0!==e)return function(t){if(void 0===t)return os("GRPC error has no .code"),fs.UNKNOWN;switch(t){case la.OK:return fs.OK;case la.CANCELLED:return fs.CANCELLED;case la.UNKNOWN:return fs.UNKNOWN;case la.DEADLINE_EXCEEDED:return fs.DEADLINE_EXCEEDED;case la.RESOURCE_EXHAUSTED:return fs.RESOURCE_EXHAUSTED;case la.INTERNAL:return fs.INTERNAL;case la.UNAVAILABLE:return fs.UNAVAILABLE;case la.UNAUTHENTICATED:return fs.UNAUTHENTICATED;case la.INVALID_ARGUMENT:return fs.INVALID_ARGUMENT;case la.NOT_FOUND:return fs.NOT_FOUND;case la.ALREADY_EXISTS:return fs.ALREADY_EXISTS;case la.PERMISSION_DENIED:return fs.PERMISSION_DENIED;case la.FAILED_PRECONDITION:return fs.FAILED_PRECONDITION;case la.ABORTED:return fs.ABORTED;case la.OUT_OF_RANGE:return fs.OUT_OF_RANGE;case la.UNIMPLEMENTED:return fs.UNIMPLEMENTED;case la.DATA_LOSS:return fs.DATA_LOSS;default:return ls()}}(e)}(t),n=r.message;void 0===e&&(e=fs.INTERNAL,n="Unknown error status: "+t+" with message "+r.message),h=!0,f.$i(new ds(e,n)),l.close()}else ss("Connection","WebChannel received:",n),f.Oi(n)}})),d(r,Xr.STAT_EVENT,(t=>{t.stat===Qr.PROXY?ss("Connection","Detected buffering proxy"):t.stat===Qr.NOPROXY&&ss("Connection","Detected no buffering proxy")})),setTimeout((()=>{f.ki()}),0),f}}function Fc(){return"undefined"!=typeof document?document:null}function Vc(t){return new Sa(t,!0)}class Uc{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=i,this.Gi=r,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),i=Math.max(0,e-n);i>0&&ss("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,(()=>(this.Ji=Date.now(),t()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class jc extends class{constructor(t,e,n,i,r,s){this.Oe=t,this.er=n,this.nr=i,this.credentialsProvider=r,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Uc(t,e)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}async stop(){this.ar()&&await this.close(0)}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this.dr())))}wr(t){this._r(),this.stream.send(t)}async dr(){if(this.cr())return this.close(0)}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}async close(t,e){this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===fs.RESOURCE_EXHAUSTED?(os(e.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):e&&e.code===fs.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ci(e)}mr(){}auth(){this.state=1;const t=this.gr(this.sr),e=this.sr;this.credentialsProvider.getToken().then((t=>{this.sr===e&&this.yr(t)}),(e=>{t((()=>{const t=new ds(fs.UNKNOWN,"Fetching auth token failed: "+e.message);return this.pr(t)}))}))}yr(t){const e=this.gr(this.sr);this.stream=this.Tr(t),this.stream.Si((()=>{e((()=>(this.state=2,this.listener.Si())))})),this.stream.Ci((t=>{e((()=>this.pr(t)))})),this.stream.onMessage((t=>{e((()=>this.onMessage(t)))}))}ur(){this.state=4,this.rr.Xi((async()=>{this.state=0,this.start()}))}pr(t){return ss("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(3,t)}gr(t){return e=>{this.Oe.enqueueAndForget((()=>this.sr===t?e():(ss("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}{constructor(t,e,n,i,r){super(t,"write_stream_connection_backoff","write_stream_idle",e,n,r),this.N=i,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(t){return this.nr.ji("Write",t)}onMessage(t){if(us(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();const e=function(t,e){return t&&t.length>0?(us(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?ka(t.updateTime):ka(e);return n.isEqual(Ns.min())&&(n=ka(e)),new Go(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=ka(t.commitTime);return this.listener.vr(n,e)}return us(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const t={};t.database=function(t){return new Rs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.N),this.wr(t)}Pr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof na)n={update:xa(t,e.key,e.value)};else if(e instanceof aa)n={delete:_a(t,e.key)};else if(e instanceof ia)n={update:xa(t,e.key,e.data),updateMask:Ua(e.fieldMask)};else{if(!(e instanceof ca))return ls();n={verify:_a(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Uo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof jo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ho)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qo)return{fieldPath:e.field.canonicalString(),increment:n.C};throw ls()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Da(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ls()}(t,e.precondition)),n}(this.N,t)))};this.wr(e)}}class Bc extends class{}{constructor(t,e,n){super(),this.credentials=t,this.nr=e,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new ds(fs.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.Cr(),this.credentials.getToken().then((i=>this.nr.Li(t,e,n,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===fs.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new ds(fs.UNKNOWN,t.toString())}))}Ki(t,e,n){return this.Cr(),this.credentials.getToken().then((i=>this.nr.Ki(t,e,n,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===fs.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new ds(fs.UNKNOWN,t.toString())}))}terminate(){this.Dr=!0}}class Hc{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve()))))}Lr(t){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Fr("Offline")))}set(t){this.Br(),this.Nr=0,"Online"===t&&(this.$r=!1),this.Fr(t)}Fr(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Mr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(os(e),this.$r=!1):ss("OnlineStateTracker",e)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class $c{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=r,this.Qr.Ti((t=>{n.enqueueAndForget((async()=>{zc(this)&&(ss("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=hs(t);e.Kr.add(4),await Kc(e),e.Wr.set("Unknown"),e.Kr.delete(4),await qc(e)}(this))}))})),this.Wr=new Hc(n,i)}}async function qc(t){if(zc(t))for(const e of t.jr)await e(!0)}async function Kc(t){for(const e of t.jr)await e(!1)}function zc(t){return 0===hs(t).Kr.size}async function Gc(t,e,n){if(!ic(e))throw e;t.Kr.add(1),await Kc(t),t.Wr.set("Offline"),n||(n=()=>function(t){const e=hs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.ze.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ss("RemoteStore","Retrying IndexedDB access"),await n(),t.Kr.delete(1),await qc(t)}))}function Wc(t,e){return e().catch((n=>Gc(t,n,e)))}async function Xc(t){const e=hs(t),n=rl(e);let i=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;Qc(e);)try{const t=await wc(e.localStore,i);if(null===t){0===e.Ur.length&&n.lr();break}i=t.batchId,Yc(e,t)}catch(t){await Gc(e,t)}Jc(e)&&Zc(e)}function Qc(t){return zc(t)&&t.Ur.length<10}function Yc(t,e){t.Ur.push(e);const n=rl(t);n.cr()&&n.br&&n.Pr(e.mutations)}function Jc(t){return zc(t)&&!rl(t).ar()&&t.Ur.length>0}function Zc(t){rl(t).start()}async function tl(t){rl(t).Sr()}async function el(t){const e=rl(t);for(const n of t.Ur)e.Pr(n.mutations)}async function nl(t,e,n){const i=t.Ur.shift(),r=sc.from(i,e,n);await Wc(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Xc(t)}async function il(t,e){e&&rl(t).br&&await async function(t,e){if(function(t){switch(t){default:return ls();case fs.CANCELLED:case fs.UNKNOWN:case fs.DEADLINE_EXCEEDED:case fs.RESOURCE_EXHAUSTED:case fs.INTERNAL:case fs.UNAVAILABLE:case fs.UNAUTHENTICATED:return!1;case fs.INVALID_ARGUMENT:case fs.NOT_FOUND:case fs.ALREADY_EXISTS:case fs.PERMISSION_DENIED:case fs.FAILED_PRECONDITION:case fs.ABORTED:case fs.OUT_OF_RANGE:case fs.UNIMPLEMENTED:case fs.DATA_LOSS:return!0}}(n=e.code)&&n!==fs.ABORTED){const n=t.Ur.shift();rl(t).hr(),await Wc(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Xc(t)}var n}(t,e),Jc(t)&&Zc(t)}function rl(t){return t.Hr||(t.Hr=function(t,e,n){const i=hs(t);return i.Cr(),new jc(e,i.nr,i.credentials,i.N,n)}(t.datastore,t.asyncQueue,{Si:tl.bind(null,t),Ci:il.bind(null,t),Vr:el.bind(null,t),vr:nl.bind(null,t)}),t.jr.push((async e=>{e?(t.Hr.hr(),await Xc(t)):(await t.Hr.stop(),t.Ur.length>0&&(ss("RemoteStore",`Stopping write stream with ${t.Ur.length} pending writes`),t.Ur=[]))}))),t.Hr}class sl{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new sl(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ds(fs.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ol(t,e){if(os("AsyncQueue",`${e}: ${t}`),ic(t))return new ds(fs.UNAVAILABLE,`${e}: ${t}`);throw t}class al{constructor(){this.queries=new dc((t=>ko(t)),Do),this.onlineState="Unknown",this.Zr=new Set}}class cl{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new dc((t=>ko(t)),Do),this.ko=new Map,this.$o=new Set,this.Oo=new ha($s.comparator),this.Fo=new Map,this.Mo=new Ec,this.Lo={},this.Bo=new Map,this.Uo=hc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function ll(t,e,n){const i=hs(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.xo.forEach(((n,i)=>{const r=i.view.eo(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=hs(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.eo(e)&&(i=!0)})),i&&function(t){t.Zr.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.No.Er(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ul(t,e){const n=hs(t),i=e.batch.batchId;try{const t=await function(t,e){const n=hs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=nc.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);us(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&i.addEntry(e,n.commitVersion))}))})),o.next((()=>t.In.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,i)))}))}(n.localStore,e);dl(n,i,null),fl(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await pl(n,t)}catch(t){await fc(t)}}async function hl(t,e,n){const i=hs(t);try{const t=await function(t,e){const n=hs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.In.lookupMutationBatch(t,e).next((e=>(us(null!==e),i=e.keys(),n.In.removeMutationBatch(t,e)))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,i)))}))}(i.localStore,e);dl(i,e,n),fl(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await pl(i,t)}catch(n){await fc(n)}}function fl(t,e){(t.Bo.get(e)||[]).forEach((t=>{t.resolve()})),t.Bo.delete(e)}function dl(t,e,n){const i=hs(t);let r=i.Lo[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Lo[i.currentUser.toKey()]=r}}async function pl(t,e,n){const i=hs(t),r=[],s=[],o=[];i.xo.isEmpty()||(i.xo.forEach(((t,a)=>{o.push(i.Ko(a,e,n).then((t=>{if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),r.push(t);const e=gc.kn(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.No.Er(r),await async function(t,e){const n=hs(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>nc.forEach(e,(e=>nc.forEach(e.Nn,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>nc.forEach(e.xn,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!ic(t))throw t;ss("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Un.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Un=n.Un.insert(e,r)}}}(i.localStore,s))}async function gl(t,e){const n=hs(t);if(!n.currentUser.isEqual(e)){ss("SyncEngine","User change. New user:",e.toKey());const t=await vc(n.localStore,e);n.currentUser=e,function(t,e){t.Bo.forEach((t=>{t.forEach((t=>{t.reject(new ds(fs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await pl(n,t.Wn)}}function ml(t){const e=hs(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ul.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hl.bind(null,e),e}class yl{constructor(){this.synchronizeTabs=!1}async initialize(t){this.N=Vc(t.databaseInfo.databaseId),this.sharedClientState=this.Wo(t),this.persistence=this.Go(t),await this.persistence.start(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t)}zo(t){return null}Ho(t){return function(t,e,n,i){return new yc(t,e,n,i)}(this.persistence,new mc,t.initialUser,this.N)}Go(t){return new Dc(Cc.Ns,this.N)}Wo(t){return new Rc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class vl{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>ll(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=gl.bind(null,this.syncEngine),await async function(t,e){const n=hs(t);e?(n.Kr.delete(2),await qc(n)):e||(n.Kr.add(2),await Kc(n),n.Wr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new al}createDatastore(t){const e=Vc(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Mc(i));var i;return function(t,e,n){return new Bc(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>ll(this.syncEngine,t,0),s=Lc.bt()?new Lc:new xc,new $c(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new cl(t,e,n,i,r,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=hs(t);ss("RemoteStore","RemoteStore shutting down."),e.Kr.add(5),await Kc(e),e.Qr.shutdown(),e.Wr.set("Unknown")}(this.remoteStore)}}class wl{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=es.UNAUTHENTICATED,this.clientId=Is.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,(async t=>{ss("FirestoreClient","Received user=",t.uid),await this.credentialListener(t),this.user=t}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ds(fs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),t.resolve()}catch(e){const n=ol(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function bl(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(ss("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),ss("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await vc(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new yl)),t.offlineComponents}(t);ss("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>async function(t,e){const n=hs(t);n.asyncQueue.verifyOperationInProgress(),ss("RemoteStore","RemoteStore received new credentials");const i=zc(n);n.Kr.add(3),await Kc(n),i&&n.Wr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Kr.delete(3),await qc(n)}(e.remoteStore,t))),t.onlineComponents=e}function El(t){return async function(t){return t.onlineComponents||(ss("FirestoreClient","Using default OnlineComponentProvider"),await bl(t,new vl)),t.onlineComponents}(t).then((t=>t.syncEngine))}class Il{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Tl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Tl&&t.projectId===this.projectId&&t.database===this.database}}const Sl=new Map;function Al(t,e,n){if(!n)throw new ds(fs.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Nl(t){if(!$s.isDocumentKey(t))throw new ds(fs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ls()}function kl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ds(fs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dl(t);throw new ds(fs.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Cl{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ds(fs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ds(fs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new ds(fs.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _l{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cl({}),this._settingsFrozen=!1,t instanceof Tl?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ds(fs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(t.options.projectId)}(t))}get app(){if(!this._app)throw new ds(fs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ds(fs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cl(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ms;switch(t.type){case"gapi":const e=t.client;return us(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ws(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ds(fs.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Sl.get(t);e&&(ss("ComponentProvider","Removing Datastore"),Sl.delete(t),e.terminate())}(this),Promise.resolve()}}class Rl{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Rl(this.firestore,t,this._key)}}class xl{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new xl(this.firestore,t,this._query)}}class Ll extends xl{constructor(t,e,n){super(t,e,function(t){return new So(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Rl(this.firestore,null,new $s(t))}withConverter(t){return new Ll(this.firestore,t,this._path)}}class Ol{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Uc(this,"async_queue_retry"),this.Ta=()=>{const t=Fc();t&&ss("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const t=Fc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ea(),this.Ia(t)}enterRestrictedMode(t){if(!this.wa){this.wa=!0,this.ya=t||!1;const e=Fc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ta)}}enqueue(t){if(this.Ea(),this.wa)return new Promise((()=>{}));const e=new ps;return this.Ia((()=>this.wa&&this.ya?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.da.push(t),this.Aa())))}async Aa(){if(0!==this.da.length){try{await this.da[0](),this.da.shift(),this.rr.reset()}catch(t){if(!ic(t))throw t;ss("AsyncQueue","Operation failed with retryable error: "+t)}this.da.length>0&&this.rr.Xi((()=>this.Aa()))}}Ia(t){const e=this.fa.then((()=>(this.ga=!0,t().catch((t=>{throw this.ma=t,this.ga=!1,os("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.ga=!1,t))))));return this.fa=e,e}enqueueAfterDelay(t,e,n){this.Ea(),this.pa.indexOf(t)>-1&&(e=0);const i=sl.createAndSchedule(this,t,e,n,(t=>this.Ra(t)));return this._a.push(i),i}Ea(){this.ma&&ls()}verifyOperationInProgress(){}async ba(){let t;do{t=this.fa,await t}while(t!==this.fa)}Pa(t){for(const e of this._a)if(e.timerId===t)return!0;return!1}va(t){return this.ba().then((()=>{this._a.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this._a)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.ba()}))}Va(t){this.pa.push(t)}Ra(t){const e=this._a.indexOf(t);this._a.splice(e,1)}}class Pl extends _l{constructor(t,e){super(t,e),this.type="firestore",this._queue=new Ol,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ml(this),this._firestoreClient.terminate()}}function Ml(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new Il(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new wl(t._credentials,t._queue,i)}class Fl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ds(fs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ls(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Vl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vl(Ps.fromBase64String(t))}catch(t){throw new ds(fs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Vl(Ps.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Ul{constructor(t){this._methodName=t}}class jl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ds(fs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ds(fs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ts(this._lat,t._lat)||Ts(this._long,t._long)}}const Bl=/^__.*__$/;class Hl{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new ia(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function $l(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ls()}}class ql{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Sa(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(t){return new ql(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Ca({path:n,xa:!1});return i.ka(t),i}$a(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Ca({path:n,xa:!1});return i.Sa(),i}Oa(t){return this.Ca({path:void 0,xa:!0})}Fa(t){return Zl(t,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Sa(){if(this.path)for(let t=0;t<this.path.length;t++)this.ka(this.path.get(t))}ka(t){if(0===t.length)throw this.Fa("Document fields must not be empty");if($l(this.Da)&&Bl.test(t))throw this.Fa('Document fields cannot begin and end with "__"')}}class Kl{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||Vc(t)}Ba(t,e,n,i=!1){return new ql({Da:t,methodName:e,La:n,path:Ls.emptyPath(),xa:!1,Ma:i},this.databaseId,this.N,this.ignoreUndefinedProperties)}}class zl extends Ul{_toFieldTransform(t){if(2!==t.Da)throw 1===t.Da?t.Fa(`${this._methodName}() can only appear at the top level of your update data`):t.Fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof zl}}function Gl(t,e){if(Wl(t=d(t)))return Xl("Unsupported field value:",e,t),function(t,e){const n={};return Cs(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,((t,i)=>{const r=Gl(i,e.Na(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}(t,e);if(t instanceof Ul)return function(t,e){if(!$l(e.Da))throw e.Fa(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Fa(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Gl(r,e.Oa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=d(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Oo(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=As.fromDate(t);return{timestampValue:Aa(e.N,n)}}if(t instanceof As){const n=new As(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Aa(e.N,n)}}if(t instanceof jl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vl)return{bytesValue:Na(e.N,t._byteString)};if(t instanceof Rl){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Fa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ca(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Fa(`Unsupported field value: ${Dl(t)}`)}(t,e)}function Wl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof As||t instanceof jl||t instanceof Vl||t instanceof Rl||t instanceof Ul)}function Xl(t,e,n){if(!Wl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Dl(n);throw"an object"===i?e.Fa(t+" a custom object"):e.Fa(t+" "+i)}}function Ql(t,e,n){if((e=d(e))instanceof Fl)return e._internalPath;if("string"==typeof e)return Jl(t,e);throw Zl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Yl=new RegExp("[~\\*/\\[\\]]");function Jl(t,e,n){if(e.search(Yl)>=0)throw Zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fl(...e.split("."))._internalPath}catch(i){throw Zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zl(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ds(fs.INVALID_ARGUMENT,a+t+c)}function tu(t,e){return t.some((t=>t.isEqual(e)))}function eu(t,e){return function(t,e){const n=new ps;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=ml(t);try{const t=await function(t,e){const n=hs(t),i=As.now(),r=e.reduce(((t,e)=>t.add(e.key)),Ia());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Qn.Pn(t,r).next((r=>{s=r;const o=[];for(const t of e){const e=Zo(t,s.get(t.key));null!=e&&o.push(new ia(t.key,e,no(e.value.mapValue),Wo.exists(!0)))}return n.In.addMutationBatch(t,i,o,e)})))).then((t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Lo[t.currentUser.toKey()];i||(i=new ha(Ts)),i=i.insert(e,n),t.Lo[t.currentUser.toKey()]=i}(i,t.batchId,n),await pl(i,t.changes),await Xc(i.remoteStore)}catch(t){const e=ol(t,"Failed to persist write");n.reject(e)}}(await El(t),e,n))),n.promise}(function(t){return t._firestoreClient||Ml(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}ns="9.1.3",O(new p("firestore",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=new Pl(n,new ys(t.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),i._setSettings(e),i}),"PUBLIC")),U(ts,"3.1.1",void 0),U(ts,"3.1.1","esm2017");let nu=localStorage.getItem("lang"),iu=parseInt(localStorage.getItem("loc")),ru=localStorage.getItem("doc");null!==nu&&null!==iu&&null!==ru||window.location.replace("./"),function(t=V()){const e=P(t=d(t),Et);e.isInitialized()?e.getImmediate():function(t,e={}){const n=P(t,Et);if(n.isInitialized()){const t=n.getImmediate();if(u(e,n.getOptions()))return t;throw At.create("already-initialized")}n.initialize({options:e})}(t)}(function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw M.create("bad-app-name",{appName:String(i)});const r=R.get(i);if(r){if(u(t,r.options)&&u(n,r.config))return r;throw M.create("duplicate-app",{appName:i})}const s=new y(i);for(const t of x.values())s.addComponent(t);const o=new F(t,n,s);return R.set(i,o),o}({apiKey:"AIzaSyCXExV3lCZdNl34Wy8RyODHP9ZN14Bj5xM",authDomain:"undp-survey.firebaseapp.com",projectId:"undp-survey",storageBucket:"undp-survey.appspot.com",messagingSenderId:"274504786931",appId:"1:274504786931:web:fc4eca9ef0ab19a3f22886",measurementId:"G-7WVM2PQ54C"}));const su=function(t=V()){return P(t,"firestore").getImmediate()}();let ou={resultTitle:[{en:"You are the Change Seeker",si:"    ",ta:"   ",dv:"    "},{en:"You are the Map Maker",si:"    ",ta:"   ",dv:"   "},{en:"You are the Adventurer",si:"  ",ta:"    ",dv:"    "}],linksPage:[{en:"You have ability and inner strength to\n            make small changes for the better. \n            You can often feel at a loss when it comes to making big decisions in your life. \n            Remember, you are the main character in your life story.\n            \n            <br>\n            <br>\n            In difficult situations or when experiencing lifes various challenges, you sometimes feel bitter towards the world. Why is this happening to me? you ask yourself. Why do I always end up with such bad luck? Even when it comes to your successes, you can lack faith in your own abilities and you find yourself downplaying your achievements. You sometimes have serious doubts about whether or not you have the power to turn your life around when things take a turn for the worse.\n             Like a leaf blowing in the wind, you feel like life steers you in all these different directions without a moment to catch your breath. \n            \n            <br>\n            <br>\n            Even when you feel overwhelmed or that situations are beyond your control, each of us has the ability and inner strength to make small changes for the better. Remember, you are the main character in your life story. You might not be able to change other people around you, but you can change the way in which you feel about them and adapt.\n             Take a step back and think: what small steps can I take in the right direction, right now? Rather than focusing on the things you cannot control, concentrate on what you can. Even the littlethings can end up having a big impact further down the line.\n            \n            <br>\n            <br>\n            Need a boost? Check out\n            these websites that might be\n            helpful to you:",si:"           .           .        . \n            <br>\n            <br>\n                         .      ?    .           .     .              .     ,              . \n            \n            <br>\n            <br>\n                        ,                .        .           . ,               .    .           ?      ,       .        . \n            \n            <br>\n            <br>\n             ?       .\n            ",ta:'         .           .\n                   \n            \n            <br>\n            <br>\n                   ,       . "   ?"  "     ?"     .   ,      ,       .  ,    ,               .    ,             .\n            \n            <br>\n            <br>\n                     ,         .  ,       .       ,       .    :         ?.       ,    .      .\n            \n            <br>\n            <br>\n              ?      :',dv:"\n                                . .        .\n\n            <br>\n            <br>\n\n                      . [   ]     . [     ]  .           .            .             .\n\n            <br>\n            <br>\n                             .        .       .         .     :                   .        .\n\n            <br>\n            <br>\n                   :"},{en:"Confidence comes from within, and you can find ways to build it. \n            You can sometimes feel a bit unsure when it comes to making big decisions in your life.\n\n            <br>\n            <br>\n            People like you feel they have control over some of the situations and experiences that affect them but not others. When you face a crossroad or challenge in your life, you can sometimes lose confidence and falter, but you do find your way in the end. \n             You feel like some of your successes are your own, but find yourself making excuses for these, telling people that your achievements were due to luck, or by being in the right place at the right time. On the other side of the table, when life knocks you back, you sometimes find yourself spending periods of time wondering why the universe is standing against you. But you should be proud of your achievements. When it comes to difficult life choices, have faith in your abilities to make the right decision for you. Youve got this!\n\n            <br>\n            <br>\n            Need a bit of advice for that?\n            Here are some websites that\n            might interest you:",si:"  .       .  \n            ,          . \n            \n            <br>\n            <br>\n               ,   ,           .       ,        . ,      .\n                    . ,     .       .  ,               . ,       .       ,         .   . \n            \n            <br>\n            <br>\n               ?        .\n            ",ta:"   .     . \n                ,       \n\n            <br>\n            <br>\n                       ,    .         ,      ,      .        ,     ,               . ,     ,               .       .     ,        .   !\n            \n            <br>\n            <br>\n                ?     :",dv:"\n                    .        \n        .\n\n\n            <br>\n            <br>\n                        .               .     .      .     .             .                .      .            .   !\n\n            <br>\n            <br>\n                     :"},{en:"Nice one! You are not afraid to make big decisions and confident. You can accomplish whatever you set your mind to.\n\n            <br>\n            <br>\n            People like you generally feel they have control over situations that affect them. When it comes to things like education and employment, you feel that your successes are to a large extent due to your own hard work and perseverance, rather than a product of society or systems around you.\n             When it comes to challenges and struggles, you feel these are temporary because, despite lifes knocks and tumbles, you have the power and motivation within you to change your circumstances. You know that things will get better in the future if you maintain your proactive attitude.\n            \n            <br>\n            <br>\n            But sometimes there are people who dont feel this way. They can feel trapped, like their options and opportunities are limited, and that they have to live with their lot.\n             People like you can make a huge difference by helping others see beyond the confines of their immediate situation and lifting them up to realise they do have the power to take back control over their own lives.\n\n            <br>\n            <br>\n            Want to help, but need some\n            advice? Check out these\n            helpful websites:",si:" !    .        .        .\n\n            <br>\n            <br>\n                        .                .          .      ,     . ,     ,          .     ,       . \n            \n            <br>\n            <br>\n            , ,      .       .       .       .                           .   \n            \n            <br>\n            <br>\n              ?     ,    : \n            ",ta:" !        . \n                \n            <br>\n            <br>\n                    .     ,                   .     ,     , ,     ,       .           . \n            \n            <br>\n            <br>\n                 .                   .           ,                .\n            \n            <br>\n            <br>\n             ,    ?    :",dv:"\n                    .        \n        .\n\n\n            <br>\n            <br>\n                        .                         .          .               .          .\n            \n            <br>\n            <br>\n                  .          .                          .\n\n            <br>\n            <br>\n                    :"}]},au=document.getElementById("links-result-header-container"),cu=document.getElementById("links-result-subtext-container");function lu(t){const e=document.getElementById("links-email-submit-indicator");switch(e.innerText={success:{en:"email submitted",si:"   ",ta:" ",dv:"email submitted"},failed:{en:"failed to submit email",si:"    ",ta:"  ",dv:"failed to submit email"}}[t][nu],nu){case"en":e.style.fontSize="1em";break;case"si":e.style.fontSize="0.8em";break;case"ta":e.style.fontSize="0.6em";break;case"dv":e.style.fontSize="0.8em"}switch(t){case"success":e.style.color="#cbfa01";break;case"failed":e.style.color="#ff2b2b"}}window.addEventListener("load",(function(){document.getElementById("links-page-container").style.display="initial",au.innerText=ou.resultTitle[iu][nu],cu.innerHTML=ou.linksPage[iu][nu],function(t){const e={linkTop:[{en:"How to cope if you have social anxiety, how to build confidence ",si:"       ,    ",ta:"      ,   ?",dv:"           "},{en:"How to make a difficult decision.",si:"   ",ta:"   ",dv:"   "},{en:"How to talk to friends to check if they are doing OK",si:"           ",ta:"      ",dv:"    "}],linkLeft:[{en:"Mental Health Care",si:"  ",ta:" ",dv:"link left loc 0"},{en:"Mental Health Care",si:"  ",ta:" ",dv:"link left loc 1"},{en:"How to get involved in volunteering ",si:"    ?",ta:"   ",dv:"     "}],linkRight:[{en:"Self Confidence",si:" ",ta:"",dv:"link right loc 0"},{en:"Volunteering opportunities",si:" ",ta:" ",dv:"link right loc 1"},{en:"Mindfulness and meditation",si:"  ",ta:"  ",dv:"link right loc 2"}]},n={linkTop:["https://www.nhs.uk/mental-health/conditions/social-anxiety/","https://hbr.org/2015/11/3-timeless-rules-for-making-tough-decisions ","https://www.nytimes.com/2020/07/28/smarter-living/coronavirus-how-to-check-in-with-a-friend.html"],linkLeft:["https://www.mentalhealth.org.uk/your-mental-health/looking-after-your-mental-health","https://www.nimh.nih.gov/health/topics/caring-for-your-mental-health","https://www.unv.org/"],linkRight:["https://www.nytimes.com/2019/06/03/smarter-living/how-to-improve-self-confidence.html ","https://www.unv.org/ ","https://news.harvard.edu/gazette/story/2018/04/less-stress-clearer-thoughts-with-mindfulness-meditation/"]},i=t,r=document.getElementById("resource-link-top"),s=document.getElementById("resource-link-left"),o=document.getElementById("resource-link-right");r.innerText=e.linkTop[i].en,s.innerText=e.linkLeft[i].en,o.innerText=e.linkRight[i].en,r.href=n.linkTop[i],s.href=n.linkLeft[i],o.href=n.linkRight[i]}(iu),function(){const t={emailPlaceholder:{en:"Your Email",si:"   ",ta:" ",dv:""},moreResources:{en:"More Resources",si:" ",ta:" ",dv:" "},additionalResources:{en:"Additional resources that may help you",si:"     ",ta:"   ",dv:"    "},submit:{en:"submit",si:" ",ta:"",dv:""},addResource1:{en:"How to check if your friends are doing OK?",si:"      ?",ta:"      ?",dv:"    "},addResource2:{en:"How to have a difficult conversation and get the desired end results",si:"        ",ta:"       ",dv:"      "},addResource3:{en:"Affirmation and self-help, meditation and mindfulness",si:"    ,   ",ta:"   ,   ",dv:"        "},addResource4:{en:"How to get involved in volunteering",si:"    ?",ta:"   ",dv:"     "},addResource5:{en:"How to cope if you have social anxiety, how to build confidence",si:"       ,    ",ta:"      ,   ?",dv:"           "},addResource6:{en:"How to make a difficult decision. And then follow up on specific decisions e.g. subject to study, career to choose",si:"   .        .  ,   ",ta:"  ,     ? .  ,  ?",dv:"               "},addResource7:{en:"Mental health, dealing with depression, anxiety, loneliness, disempowerment, frustration",si:" ,     , , ,  , ",ta:" , , , , ,   ",dv:"          "}};document.getElementById("links-email-input").placeholder=t.emailPlaceholder[nu],document.getElementById("additional-resources-grid-header").innerText=t.moreResources[nu],document.getElementById("additional-resources-list-header").innerText=t.additionalResources[nu],document.getElementById("links-email-submit-button").innerText=t.submit[nu],document.getElementById("additional-resources-list-item-text-1").innerText=t.addResource1.en,document.getElementById("additional-resources-list-item-text-2").innerText=t.addResource2.en,document.getElementById("additional-resources-list-item-text-3").innerText=t.addResource3.en,document.getElementById("additional-resources-list-item-text-4").innerText=t.addResource4.en,document.getElementById("additional-resources-list-item-text-5").innerText=t.addResource5.en,document.getElementById("additional-resources-list-item-text-6").innerText=t.addResource6.en,document.getElementById("additional-resources-list-item-text-7").innerText=t.addResource7.en}()})),document.getElementById("links-email-submit-button").addEventListener("click",(function(){const t=document.getElementById("links-email-input").value.toLowerCase().trim();""!==t?/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(t)?async function(t){try{const e=function(t,e,...n){if(t=d(t),1===arguments.length&&(e=Is.I()),Al("doc","path",e),t instanceof _l){const i=Rs.fromString(e,...n);return Nl(i),new Rl(t,null,new $s(i))}{if(!(t instanceof Rl||t instanceof Ll))throw new ds(fs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Rs.fromString(e,...n));return Nl(i),new Rl(t.firestore,t instanceof Ll?t.converter:null,new $s(i))}}(su,"answers",ru);await function(t,e,n,...i){t=kl(t,Rl);const r=kl(t.firestore,Pl),s=function(t){const e=t._freezeSettings(),n=Vc(t._databaseId);return new Kl(t._databaseId,!!e.ignoreUndefinedProperties,n)}(r);let o;return o="string"==typeof(e=d(e))||e instanceof Fl?function(t,e,n,i,r,s){const o=t.Ba(1,e,n),a=[Ql(e,i,n)],c=[r];if(s.length%2!=0)throw new ds(fs.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)a.push(Ql(e,s[t])),c.push(s[t+1]);const l=[],u=eo.empty();for(let t=a.length-1;t>=0;--t)if(!tu(l,a[t])){const e=a[t];let n=c[t];n=d(n);const i=o.$a(e);if(n instanceof zl)l.push(e);else{const t=Gl(n,i);null!=t&&(l.push(e),u.set(e,t))}}const h=new Os(l);return new Hl(u,h,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,i):function(t,e,n,i){const r=t.Ba(1,e,n);Xl("Data must be an object, but it was:",r,i);const s=[],o=eo.empty();ks(i,((t,i)=>{const a=Jl(e,t,n);i=d(i);const c=r.$a(a);if(i instanceof zl)s.push(a);else{const t=Gl(i,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new Os(s);return new Hl(o,a,r.fieldTransforms)}(s,"updateDoc",t._key,e),eu(r,[o.toMutation(t._key,Wo.exists(!0))])}(e,{email:t}),console.log("updated document"),lu("success")}catch(t){console.log("error updating document",t),lu("failed")}}(t):alert("You have entered an invalid email address!"):alert("Email field is empty!")}))})()})();
//# sourceMappingURL=links.bundle.8054fd394d406c020a25.js.map